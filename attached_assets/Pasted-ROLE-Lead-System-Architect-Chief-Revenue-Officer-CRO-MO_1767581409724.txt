ROLE: Lead System Architect & Chief Revenue Officer (CRO)
MODE: MAX AUTONOMOUS FIX & VERIFY
PRIORITY: DEFCON 1 — Revenue and Data Critical

CURRENT STATUS
“False Positive Ready.” Code appears compliant (v3.5.1) but runtime infrastructure is failing.

A6 provider_register: offline or crashing (404/500) — revenue blocked.
A2 scholarship_api: misconfigured — missing secrets and failing /ready checks.
A8 auto_com_center: starved — events not arriving; dashboards misleading.
OBJECTIVE
Run an end-to-end forensic audit and surgical remediation. Do not write new product features. Prove—by live data persisted in A8—that Marketing, Leads, Revenue, and Learning pipelines are working. A8 is the single source of truth. If data is not visible in A8, the system is failing.

ECOSYSTEM MAP

A1: scholar_auth (Identity)
A2: scholarship_api (Data Backbone) — config failure suspected
A3/A4: scholarship_agent / scholarship_sage (Logic/Learning)
A5: student_pilot (User App)
A6: provider_register (Revenue/B2B) — runtime failure suspected
A7: auto_page_maker (Marketing/SEO)
A8: auto_com_center (Command Center/Dashboard)
NON-NEGOTIABLE RULES

No “looks good” statements. Only evidence: A8 responses with accepted:true, persisted:true and rows present keyed by x-event-id.
Staging first. Tag all test data with simulated and a namespace so it never pollutes production analytics.
Enforce Telemetry v3.5.1 in every app. Refuse legacy contracts.
Idempotency: A8 must upsert by x-event-id; clients must send uuid-v4.
Target P95 write latency ≤150ms during tests; capture logs and request durations.
TELEMETRY CONTRACT (v3.5.1)

Endpoint: POST <A8_URL>/events
Required headers on every request:
content-type: application/json
x-scholar-protocol: v3.5.1
x-app-label: one of [scholar_auth, scholarship_api, scholarship_agent, scholarship_sage, student_pilot, provider_register, auto_page_maker]
x-event-id: uuid-v4
Authorization: Bearer <A8_KEY>
Body: { "event_type": "NewUser|NewLead|PaymentSuccess|PageView|ScholarshipMatchRequested|ScholarshipMatchResult|SageAssist|ProviderOnboarded", "occurred_at": "<ISO-8601>", "actor_id": "<user_id|provider_id|system>", "session_id": "<optional>", "source": "<route|url>", "payload": { "details": "...", "amount_cents": <int for PaymentSuccess>, "currency": "USD", "provider_id": "<optional>", "scholarship_id": "<optional>", "latency_ms": <int for match/sage>, "success": <bool for match/sage> } }
Reliability: client retries with exponential backoff on 429/5xx; implement outbox + forwarder if A8 unreachable.
PII minimization: no raw PAN/SSN, no full essays; use references/hashes.
EXECUTION PROTOCOL

PHASE 1 — REVENUE RESCUE (A6 and A2)

A6 provider_register
Check deployment status/logs. If Stopped/Crashed, fix secrets and bring online.
Required secrets: STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET, DATABASE_URL, A8_URL, A8_KEY, CORS_ORIGIN.
Stripe webhook: use raw-body verification; signature must pass; return 200 quickly.
On checkout.session.completed, emit PaymentSuccess to A8 with full v3.5.1 headers and schema.
Health: /health and /ready must return 200; P95 ≤150ms on webhook and emit path.
A2 scholarship_api
Inject live Stripe keys; centralize A8 header builder; ensure Authorization header is present on all A8 calls.
Add /ready endpoint returning {"status":"ready"} so load balancer checks pass.
VERIFY
Simulate a provider payment. Confirm A8 returns accepted:true, persisted:true and that Finance/Revenue tiles reflect the event within seconds.
PHASE 2 — MARKETING AND LEAD TRACE (A7 → A1 → A8)

Simulate a lead landing on an A7 page; confirm PageView in A8 logs.
On lead submit, A7 must create a user in A1 and emit NewLead to A8 in the same flow.
Confirm A1 emits NewUser on signup with PII-minimized payload.
If any step doesn’t appear in A8, patch A7/A1 emitters immediately.
PHASE 3 — THE LEARNING LOOP (A5/A3/A4 → A8)

Simulate a student requesting a scholarship match from A5.
Ensure ScholarshipMatchRequested and ScholarshipMatchResult are emitted with latency_ms and success flag.
A4 emits SageAssist with latency and success. Confirm all arrive in A8 with persisted:true.
PHASE 4 — FINAL HUMAN-IN-THE-LOOP VALIDATION

Forbidden: “The system looks good.”
Required deliverables:
BLOCKER_REPORT.md
Silent Failures: list events (clicks, leads, payments) that occurred but did not reach A8.
Revenue Stoppers: enumerate any UI/API friction; include A6 404/500 or Stripe misconfigs.
Fix Action Plan: exact file paths changed or deployment actions taken.
TEST_REPORT.md
Include A8 responses (accepted:true, persisted:true) and DB evidence for:
1x Mock Lead (A7 → A1 → A8)
1x Mock Auth (A1 → A8)
1x Mock Payment (A6/A2 → A8)
Include event_ids, timestamps, retries, and measured P95 write latency.
TRUTH_TABLES.md
For A1–A7: Config present? Endpoint reachable? Test event received by A8?
DIFF_SUMMARY.md and ROLLBACK.md
Enumerate every code/config change and how to revert safely.
CANARY COMMANDS (run in staging; replace <A8_URL> and <A8_KEY>)
curl -sS -X POST "<A8_URL>/events" 
-H "content-type: application/json" 
-H "x-scholar-protocol: v3.5.1" 
-H "x-app-label: scholar_auth" 
-H "x-event-id: $(uuidgen)" 
-H "authorization: Bearer <A8_KEY>" 
-d '{"event_type":"NewUser","occurred_at":"'"$(date -u +%Y-%m-%dT%H:%M:%SZ)"'","actor_id":"test_user_01","source":"canary/auth","payload":{"details":"canary"}}'
Repeat for NewLead (auto_page_maker) and PaymentSuccess (provider_register).

SUCCESS CRITERIA (binary)

A6 /health and /ready return 200.
A2 /ready returns 200 and Authorization header used on all A8 calls.
A8 shows persisted:true for NewUser, NewLead, PaymentSuccess, and Learning events; DB contains rows keyed by x-event-id.
P95 write latency ≤150ms during the test window.
START
Assume the system is broken until you see evidence in A8. Execute Phase 1 now, then Phases 2–4, and submit the required reports.