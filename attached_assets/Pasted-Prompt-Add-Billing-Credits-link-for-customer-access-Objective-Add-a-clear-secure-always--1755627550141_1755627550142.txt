Prompt — Add “Billing & Credits” link for customer access

Objective
Add a clear, secure, always-visible entry point in the ScholarLink UI that sends users to the production billing portal.

Target URL

BILLING_PORTAL_URL: https://billing.student-pilot.replit.app
Implementation requirements

Config

Introduce an env/config key BILLING_PORTAL_URL with default https://billing.student-pilot.replit.app so we don’t hard-code the URL.
Gate visibility with a feature flag BILLING_LINK_ENABLED=true (default on).
UI placement

Header/top nav: Add a “Billing & Credits” link.
User menu (avatar dropdown): Add “Billing & Credits” as a menu item.
Footer: Add “Billing & Credits” under Resources/Account for redundancy.
Mobile: Ensure the link appears in the mobile nav/drawer.
Behavior

Open in a new tab (target="_blank", rel="noopener noreferrer").
Append tracking params: ?utm_source=scholarlink-app&utm_medium=nav&utm_campaign=billing-link
Optional: If we have a user ID, also append userId=<uuid> as a non-PII param or internal correlation ID (only if policy allows).
Security and compatibility

Use CORS-safe navigation (no cross-origin XHR). This is a plain link out to the billing portal.
Do not include tokens in the URL. If/when we add SSO, use server-side session exchange or short-lived redirect, not query tokens.
Ensure CSP allows navigation to the billing domain (frame-src/connect-src not needed; just allow normal navigation).
Copy and affordance

Label: “Billing & Credits”
Secondary CTA (optional): On low-balance banners or when a debit fails due to insufficient credits, render a “Buy Credits” button linking to BILLING_PORTAL_URL.
Accessibility

Provide aria-label="Open Billing and Credits portal (opens in new tab)".
Ensure keyboard focus style is visible.
Tests (acceptance)

Link is visible in header, user menu, and footer when BILLING_LINK_ENABLED=true.
Clicking the link opens a new tab to BILLING_PORTAL_URL with UTM params.
On mobile breakpoint, the link is present in the drawer and usable via keyboard.
With BILLING_LINK_ENABLED=false, link is hidden everywhere.
Lighthouse/axe scan shows no new a11y violations.
Documentation

Update user-facing Help/FAQ: “How to purchase credits” and “View your ledger.”
Add BILLING_PORTAL_URL and BILLING_LINK_ENABLED to the env/config docs.
Rollout

Default on in staging; verify navigation and tracking.
Enable in production behind the feature flag. Monitor clicks and support tickets for 24–48 hours.
Example (React/Next.js style; adapt to your framework)

Read from config/env: const BILLING_URL = ${process.env.BILLING_PORTAL_URL}?utm_source=scholarlink-app&utm_medium=nav&utm_campaign=billing-link;
Header: <a href={BILLING_URL} target="_blank" rel="noopener noreferrer" aria-label="Open Billing and Credits portal (opens in new tab)">Billing & Credits</a>
Feature flag: if (!flags.BILLING_LINK_ENABLED) hide all instances.
Acceptance criteria (sign-off)

Users can reliably reach the billing portal from any page (desktop and mobile).
No tokens or sensitive data in the URL; CSP and security headers remain passing.
No broken links; 200/3xx from billing endpoint; tracking parameters present.
Feature flag allows immediate disable without redeploy.
Use BILLING_PORTAL_URL=https://billing.student-pilot.replit.app for production.