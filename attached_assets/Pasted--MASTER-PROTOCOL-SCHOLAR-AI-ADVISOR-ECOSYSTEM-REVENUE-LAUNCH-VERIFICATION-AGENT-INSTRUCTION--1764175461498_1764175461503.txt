# MASTER PROTOCOL: SCHOLAR AI ADVISOR ECOSYSTEM â€” REVENUE LAUNCH VERIFICATION
# AGENT INSTRUCTION: EXECUTE ONLY YOUR SPECIFIC APP SECTION. IGNORE OTHERS.

You are the Systems Architect. Your goal is to verify that THIS specific application is 100% production-ready, republished, and integrated with the ecosystem.

**GLOBAL DIRECTORY (AUTHORITATIVE BASE URLs):**
1. scholar_auth -> https://scholar-auth-jamarrlmayes.replit.app
2. scholarship_api -> https://scholarship-api-jamarrlmayes.replit.app
3. scholarship_agent -> https://scholarship-agent-jamarrlmayes.replit.app
4. scholarship_sage -> https://scholarship-sage-jamarrlmayes.replit.app
5. student_pilot -> https://student-pilot-jamarrlmayes.replit.app
6. provider_register -> https://provider-register-jamarrlmayes.replit.app
7. auto_page_maker -> https://auto-page-maker-jamarrlmayes.replit.app
8. auto_com_center -> https://auto-com-center-jamarrlmayes.replit.app

---

### PHASE 1: SELF-IDENTIFICATION (MANDATORY)
**INSTRUCTION:** Before doing anything, inspect your environment (`package.json`, `replit.nix`, or env vars) to determine your identity.
* **PRINT:** "I have identified myself as: [APP_ID]"
* **PRINT:** "My Base URL is: [YOUR_BASE_URL]"
* **CRITICAL RULE:** ONLY execute the section below matching your [APP_ID]. Do not halluncinate checks for other apps.

---

### PHASE 2: APP-SPECIFIC EXECUTION PROTOCOLS

#### [SECTION: scholar_auth]
**Role:** Identity & Security
1.  **JWKS Check:** Verify `/.well-known/jwks.json` returns 200 OK and contains keys.
2.  **M2M Clients:** Confirm clients exist for all 8 ecosystem apps.
3.  **Scopes:** Confirm `scholarship-agent-service` has `read:scholarships` and `send:notifications`.
4.  **Report:** "Auth Status: GO. M2M Clients: [COUNT]/8."

#### [SECTION: scholarship_api]
**Role:** Data Core
1.  **Health:** Verify `/api/health` is OK.
2.  **Data:** Run `SELECT count(*) FROM scholarships WHERE is_active = true`.
3.  **Webhooks:** Verify dispatcher sends `event_type` (not just `event`) to consumers.
4.  **Report:** "Data Status: GO. Active Scholarships: [COUNT]."

#### [SECTION: scholarship_agent]
**Role:** Orchestrator
1.  **Config:** Verify `DRY_RUN` is `FALSE` (Required for Revenue).
2.  **Connections:** Ping `auto_page_maker` and `auto_com_center` health endpoints.
3.  **Campaigns:** Verify `POST /api/campaigns/run` is accessible.
4.  **Report:** "Orchestrator Status: GO. Revenue Mode: [ACTIVE/DRY_RUN]."

#### [SECTION: scholarship_sage]
**Role:** AI RAG
1.  **Vector DB:** Verify connection (PostgreSQL/Pinecone) for retrieval.
2.  **Inference:** Confirm OpenAI/Groq key is present.
3.  **Auth:** Verify JWKS fetch from `scholar_auth`.
4.  **Report:** "Sage Status: GO. Vector Store: [CONNECTED]."

#### [SECTION: student_pilot]
**Role:** B2C Interface
1.  **Revenue:** Verify Stripe Checkout is configured for LIVE mode (not Test).
2.  **Data:** Fetch matches from `scholarship_api`.
3.  **Storage:** Verify Object Storage bucket is connected for uploads.
4.  **Report:** "Student Pilot Status: GO. Revenue Flow: [STRIPE LIVE]."

#### [SECTION: provider_register]
**Role:** B2B Acquisition
1.  **Public Access:** Verify app is published and reachable.
2.  **Integration:** Verify writes to `scholarship_api` (Provider Profile creation).
3.  **Auth:** Verify JWT validation with `scholar_auth`.
4.  **Report:** "Provider Portal Status: GO."

#### [SECTION: auto_page_maker]
**Role:** SEO Engine
1.  **Build API:** Verify `POST /api/pages/build` returns canonical URL + Schema.
2.  **Sitemap:** Verify `/sitemap.xml` is accessible and reports URL count.
3.  **SEO:** Verify Search Engine Ping (Google/Bing) logic is active.
4.  **Report:** "SEO Status: GO. Sitemap Count: [COUNT]."

#### [SECTION: auto_com_center]
**Role:** Communications
1.  **Transport:** Verify Postmark/SendGrid is LIVE (not Mock).
2.  **Templates:** Confirm registry contains `scholarship_match` and `provider_welcome`.
3.  **Security:** Verify `POST /api/notify` enforces Bearer Token auth.
4.  **Report:** "Comms Status: GO. Transport: [LIVE/MOCK]."

---

### PHASE 3: FINAL REPORTING
**INSTRUCTION:**
1.  Output a summary table of your checks.
2.  List any **BLOCKERS** (e.g., Missing Secrets, 500 Errors).
3.  If ALL checks pass and you are ready for live traffic/money, end with:
    **"STATUS: FULL REVENUE GO"**