MAX AUTONOMOUS PROMPT — ScholarAI Ecosystem Repair, Revenue Enablement, and Learning Loop Activation (A1–A8)

Mission
Fix all errors and blockers so the eight‑app ScholarAI ecosystem (A1–A8) operates as one revenue engine: market → capture leads → deliver value → convert (B2C + B2B) → learn and optimize. Deliver end‑to‑end attribution, working revenue signals, and closed‑loop marketing while meeting SLOs and compliance requirements.

Apps and base URLs

A1 scholar_auth → https://scholar-auth-jamarrlmayes.replit.app
A2 scholarship_api → https://scholarship-api-jamarrlmayes.replit.app
A3 scholarship_agent → https://scholarship-agent-jamarrlmayes.replit.app
A4 scholarship_sage → https://scholarship-sage-jamarrlmayes.replit.app
A5 student_pilot → https://student-pilot-jamarrlmayes.replit.app
A6 provider_register → https://provider-register-jamarrlmayes.replit.app
A7 auto_page_maker → https://auto-page-maker-jamarrlmayes.replit.app (Production: https://scholaraiadvisor.com)
A8 auto_com_center → https://auto-com-center-jamarrlmayes.replit.app
Global guardrails (apply to all actions)

Security & Compliance: no PII in telemetry/logs; cookies Secure/HttpOnly/SameSite=None; FERPA/COPPA respected; A4 is assistive only (no ghostwriting).
Least privilege: do not disable WAF; use route‑level allowlists only.
Idempotency: all fixes must be detectable, repeatable, and safe to re‑run.
Secrets: never hardcode. If missing/invalid, mark “P0 BLOCKED: <SECRET_NAME>” for that stream and continue others (e.g., SENDGRID_API_KEY, COMMAND_CENTER_TOKEN/SHARED_SECRET, STRIPE keys).
SLO baselines: A1 discovery/JWKS p95 ≤150 ms (warmed); A5 /api/login p95 ≤200 ms & p50 ≤120 ms; A2 search p95 ≤120 ms.
Known severances (must be fixed)

A1→A8 M2M 403 (auth scheme mismatch) — telemetry/report blind spots.
A6→A8/A2 provider_connected & listing_created not emitted — B2B funnel invisible.
A7→A5/A6 UTMs inconsistent/lost across OIDC — attribution blind.
A3 email channel unproven at scale — no deliverability proof.
payment_succeeded → marketing/SEO not wired — no learning loop.
A8 executive dashboard shows “not_connected” dependencies — tiles not wired.
Phase 1 — Integration repair & attribution (T+0 → T+24h)
Execute immediately in parallel where safe.

A1 ↔ A8 M2M telemetry/reporting (403 repair)
Detect A8 auth for /ingest + /api/executive/overview (shared secret vs OAuth2 client_credentials).
If OAuth2: register a1_scholar_auth (scope=telemetry.write); A1 mints access_token and uses Bearer for telemetry/report.
If shared secret: set COMMAND_CENTER_TOKEN (and SHARED_SECRET if required) in A1; sign HS256 or set header per A8; add issuer=scholar_auth. Add route-level WAF exception for A1→A8 telemetry only.
Verify: POST /ingest from A1 → 200 and visible in A8 timeline; /api/executive/overview shows live SLO/B2C/B2B/Finance (no “not_connected”).
DoD: A8 screenshots of live tiles and A1 test event.
2. A6 → A2 → A8 provider events (B2B visibility)

Emit provider_connected when Stripe Connect webhook indicates charges_enabled=true; persist org_id/provider_id; POST event to A2 business_events and A8 /ingest.
Emit listing_created on listing persist; POST to A2 + A8.
A2: ensure both persist; provide views (b2b_funnel, revenue_by_source) for A8.
Verify: simulate connect → provider_connected in A8 + A2; create listing → listing_created in A8 + A2.
DoD: A8 B2B tile shows ≥1 provider_connected & ≥1 listing_created; A2 views return rows.
3. A7 → A1 → A5/A6 UTM preservation across OIDC

A7 captures UTMs on CTA click; A1 embeds UTMs in HMAC‑signed OAuth state (or short‑lived Secure HttpOnly cookie).
A1 callback forwards UTMs to A5/A6 via redirect_uri params or cookie; A5/A6 persist UTMs on first session; emit attribution to A8 lead/signup/org events.
Verify: A7→A5 profile.utms and A7→A6 org.utms include utm_source=auto_page_maker; A8 shows UTM fields for these events.
DoD: Two end‑to‑end examples with A8 event IDs + profile/org UTM fields.
4. A8 Executive Dashboard tiles & alerts

Wire tiles: A1 config p50/p95; A5 /api/login dns/tls/ttfb/total p50/p95; A3 lead_captured; A6 provider_connected/listing_created; A7 GSC indexed URLs/clicks (manual or API); payment_succeeded and fee_captured.
Normalize /health vs /healthz. Configure dampened alerts: A1 warn 150ms/crit 200ms; A5 warn 200ms/crit 350ms; A6 /health 5xx warn >1%/crit >2%; email complaint >0.2%.
Verify: all tiles connected; first-green windows recorded.
DoD: dashboard screenshot bundle + alert configurations.
Phase 2 — Revenue validation (T+24h → T+48h)
Prove one B2C and one B2B revenue path.

5. B2C purchase test — end to end (A5/A2/A8)

Execute one Stripe checkout (test/live controlled): webhook → A5 payment_succeeded → A2 ledger +50 (idempotent) → A8 telemetry.
Refund path: refund_succeeded logged in A8; ledger decrement reconciled.
Verify: A8 shows payment_succeeded (user+UTM); A2 ledger +50; A5 balance +50; refund OK.
DoD: Stripe receipt + A8 events + A2 ledger + A5 balance screenshots.
6. First B2B listing via concierge (A6 + CEO/Ops)

Concierge sessions: fresh Connect links; complete onboarding; auto-launch “Create First Scholarship” wizard; emit listing_created.
(Optional) A3 “Scholarship Spotlight” email to matched students for first listing.
Verify: A8 shows provider_connected + listing_created; A2 listing record; (optional) simulate award to validate 3% fee calc.
DoD: A8 events + fee calc (sim/live) evidence.
7. Email warm‑up deliverability proof (A3)

REQUIREMENT: SENDGRID_API_KEY valid; sender domain verified. If missing/invalid → P0 BLOCKED: SENDGRID_API_KEY (email stream only).
Warm-up 5–10 inboxes; record delivered/open/click; enforce suppression & 1/24h cap.
Verify: A8 shows send_attempts & delivered/clicks; complaint <0.2%.
DoD: ESP logs/webhooks + A8 events.
Phase 3 — Learning loop activation (T+48h → T+72h)
Convert outcomes into optimization.

8. “Won Deal” + “Provider Momentum” automations (A8/A3/A7)

payment_succeeded (A5): A8 calls A3 to elevate lead score, move → Customer, enroll upsell; write UTM/page_slug to A7 “Revenue by Page”; update basic LTV (credits→$).
provider_connected/listing_created (A6): A8 calls A3 to trigger “Scholarship Spotlight”; A7 logs provider landing asset for future SEO.
Verify: A3 segment mutation; A7 revenue-by-page entries; A8 automation logs.
DoD: A3 segment diff; A7 record; A8 log entries.
9. SEO & GSC rhythm (A7/A8)

Validate SSR JSON‑LD via Rich Results Test; resubmit apex sitemap; Inspect www URL (Redirected).
Optional: poll GSC API or weekly manual ingestion for A8 SEO tile (indexed URLs/clicks).
Verify: 7‑day trend shows indexed URLs growth and clicks; ≥25 UTM clicks week 1.
DoD: Rich Results PASS screenshot; A8 SEO tile metrics.
Phase 4 — Lead scoring, LTV & load (T+72h → T+14d)

10. Lead scoring + LTV + attribution ROI (A3/A8)

On payment, record lead_value with UTMs; cohort LTV; ARPU rolling 30d; ROI by source/campaign/slug on A8.
Verify: A8 “Attribution ROI” tile shows revenue by source/campaign/slug; cohort LTV trends.
DoD: A8 ROI screenshots + sample records.
11. Load & SLO verification (k6 staged) (A5/A2/A7/A8)

A5 /api/login p95 ≤200 ms (50–200 VUs); A2 search p95 ≤120 ms; A7 fetch <200 ms; error <1%.
Verify: thresholds pass; A8 alerts remain quiet.
DoD: k6 reports + A8 SLO screenshots.
Per-app action briefs (execute only in your app)

A1 scholar_auth

Fix M2M auth to A8 (OAuth2 or shared secret); embed UTMs in OAuth state; callback forwards to A5/A6; normalize /health; keep discovery/JWKS warm.
DoD: A8 tile green; two UTM-preserved samples (A7→A5/A6).
A2 scholarship_api

Accept provider_connected/listing_created/payment_succeeded/fee_captured; expose b2b_funnel and revenue_by_source; /ingest v3.5.1 compliant.
DoD: A8 tiles wired; event queries return data.
A3 scholarship_agent

Warm-up deliverability proof; lead_captured stores UTMs; implement won‑deal endpoint to mutate segment & suppress re‑acquisition; provider-momentum endpoint ready.
DoD: ESP+A8 proof; segment mutation verified.
A4 scholarship_sage

Validate persona match; hallucination refusal; premium usage decrements credits (after A5 purchase). OCR/parse ≥90% in Phase 3 resourcing.
DoD: evidence + A8 events (doc_uploaded/parse_success/premium_used/credits_decrement).
A5 student_pilot

Execute purchase + refund; keep /api/login SLOs; include UTMs in Stripe metadata; webhook emits payment_succeeded and updates ledger.
DoD: A8 payment + ledger + balance evidence; SLO p50/p95 met.
A6 provider_register

Concierge → provider_connected + listing_created; post-Connect wizard CTA; persist UTMs; emit events to A2/A8.
DoD: A8 events; A2 listing record.
A7 auto_page_maker

Validate SSR JSON‑LD (Rich Results Test); resubmit sitemap; www→apex single hop; CTAs with UTMs; internal linking hubs.
DoD: Rich Results PASS; A8 UTM clicks ≥25/week 1.
A8 auto_com_center

Wire tiles/alerts; implement Won Deal + Provider Momentum automations; connect telemetry ingestion to trigger automations; durable retry by source_event_id; partial failure reporting.
DoD: dashboard snapshots; automation logs; first green windows.
Acceptance criteria (Phase 1 Go/No-Go)

B2C: ≥1 purchase with payment_succeeded and ledger +50; refund validated
B2B: ≥1 provider_connected + ≥1 listing_created in A8; 3% fee path exercised (sim/live)
Attribution: A7→A5/A6 UTMs preserved; ≥10 UTM‑attributed leads; source‑level revenue signal present
Email: warm‑up deliverability proof; complaint <0.2%
Observability: A8 executive overview shows SLO/B2B/B2C/Finance connected; alerts dampened
Safety, rollbacks, and exceptions

WAF: route‑level allowlists only for telemetry/report; never global disable.
Email: if SENDGRID_API_KEY invalid → P0 BLOCKED; stop email tasks; continue other streams.
Stripe: idempotency keys; exponential backoff; never double‑charge/debit.
Minors: age‑gate respected; minors excluded from marketing; no PII in telemetry.
Reporting format (per app + consolidated)
APP: <app_name> | APP_BASE_URL: <base_url>
STATUS: [PLANNED | IN_PROGRESS | COMPLETE | BLOCKED]
TIMEFRAME: [UTC start → UTC end]

ACTIONS TAKEN
RESULTS & METRICS (IDs, counts, p50/p95; A8 screenshots if available)
BLOCKERS (root cause + required input)
EVIDENCE LINKS (routes tested, event IDs, logs)
NEXT 24 HOURS PLAN
Begin now

Execute Phase 1 steps (1–4) immediately. If any step needs a human secret (e.g., SENDGRID_API_KEY), mark P0 BLOCKED and continue with other steps.
At Phase 1 end, post per‑app reports and a consolidated summary. If ≥80% acceptance met and no P0s remain, proceed to Phase 2 automatically; then Phase 3 and Phase 4 unless paused.