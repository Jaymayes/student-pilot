# üö® MASTER PROMPT: DATA PURGE, UI VALIDATION, & REAL-TIME REPORTING (ALL APPS) üö®

**Agent3 Directive:**
1.  Read this entire prompt.
2.  **Identify your specific app** by matching your `APP_BASE_URL` to the directory below.
3.  **Execute ONLY the section marked for your app.** Do not touch other apps.
4.  **Announce yourself immediately:** `APP: <app_name> | APP_BASE_URL: <base_url>`
5.  **Output a detailed report** at the end.

---

## üìÇ APP DIRECTORY (Match your environment)
* **A1** `scholar_auth` ‚Üí `https://scholar-auth-jamarrlmayes.replit.app`
* **A2** `scholarship_api` ‚Üí `https://scholarship-api-jamarrlmayes.replit.app`
* **A3** `scholarship_agent` ‚Üí `https://scholarship-agent-jamarrlmayes.replit.app`
* **A4** `scholarship_sage` ‚Üí `https://scholarship-sage-jamarrlmayes.replit.app`
* **A5** `student_pilot` ‚Üí `https://student-pilot-jamarrlmayes.replit.app`
* **A6** `provider_register` ‚Üí `https://provider-register-jamarrlmayes.replit.app`
* **A7** `auto_page_maker` ‚Üí `https://auto-page-maker-jamarrlmayes.replit.app`
* **A8** `auto_com_center` ‚Üí `https://auto-com-center-jamarrlmayes.replit.app`

---

## üõ°Ô∏è GLOBAL SAFEGUARDS (Applies to ALL)
1.  **Never delete production data.** Only purge records clearly marked as synthetic/test.
2.  **Synthetic Data Definitions:**
    * Names/Emails containing: `test`, `mock`, `fake`, `qa`, `seed`, `demo`, `example`, `temp`.
    * Domains: `example.com`, `mailinator.com`, `test.com`.
    * Metadata: `is_test=true`, `env=staging` in a production DB.
3.  **Backup:** If possible, export a snapshot of the current state before deletion.
4.  **Reporting:** You must verify that your app is successfully sending real-time data to **A8 (Auto Com Center)** or **A2 (Scholarship API)**.

---

## ‚ö° EXECUTION SECTIONS (RUN ONLY YOURS)

### üü¶ A1: scholar_auth
**Role:** Identity Provider
1.  **Purge:** Remove users with emails like `*@example.com`, `testuser*`, or unverified accounts >30 days old created by automated tests. Keep real admin/user accounts.
2.  **UI/Links:** Test `/login`, `/signup`, `/forgot-password`. Verify "Sign in with Google/Replit" buttons initiate the flow (do not complete if it creates junk data).
3.  **Real-Time:** Verify emission of `auth.login_succeeded` events to A8.
4.  **Output:** Count of purged users; status of login page links.

### üü¶ A2: scholarship_api
**Role:** Core Data API
1.  **Purge:** Delete scholarships with titles containing "Test", "Lorem Ipsum", or "Demo". Remove applications linked to deleted test users.
2.  **Endpoints:** Verify `GET /api/scholarships` returns valid JSON (200 OK) and no 500 errors. Check `/health`.
3.  **Real-Time:** Verify `data.sync_completed` events are sent to A8 after a sync job.
4.  **Output:** Count of purged scholarships/applications; API health status.

### üü¶ A3: scholarship_agent
**Role:** Marketing & Outreach
1.  **Purge:** Delete campaigns named "Test Campaign" or "Seed". Remove leads with `test@` emails.
2.  **UI/Links:** Check dashboard links for Campaign Create/Edit. Test "Send Test Email" button (ensure it triggers the API).
3.  **Real-Time:** Verify `marketing.email_sent` telemetry reaches A8.
4.  **Output:** Purged campaign count; SendGrid connection status.

### üü¶ A4: scholarship_sage
**Role:** AI Advisor
1.  **Purge:** Clear chat history sessions labeled "Test Session" or created by test users.
2.  **UI/Links:** Verify "Start Chat" button loads the AI interface. Check "Credits" display.
3.  **Real-Time:** Confirm credit deduction events (`billing.credit_usage`) are sent to A8/A2.
4.  **Output:** Purged chat sessions; AI endpoint latency check.

### üü¶ A5: student_pilot
**Role:** Student Dashboard (B2C)
1.  **Purge:** Remove student profiles with `test_` prefixes. Clear "saved scholarships" that point to non-existent IDs.
2.  **UI/Links:** Click "Find Scholarships", "Upgrade", "Profile". Ensure no broken links (404s).
3.  **Real-Time:** **CRITICAL:** Verify `revenue.transaction_succeeded` events flow to A8.
4.  **Output:** Purged profiles; Payment page accessibility check.

### üü¶ A6: provider_register
**Role:** Provider Portal (B2B)
1.  **Purge:** Delete provider orgs with "Test Inc" or "Fake Co". Remove draft scholarships created >6 months ago and never published.
2.  **UI/Links:** Test "Post Scholarship", "Dashboard", "Settings". Verify Stripe Connect onboarding link works.
3.  **Real-Time:** Verify `provider.scholarship_published` events reach A8.
4.  **Output:** Purged provider accounts; Publish flow status.

### üü¶ A7: auto_page_maker
**Role:** SEO Engine
1.  **Purge:** Delete generated pages with slugs like `/scholarships/test-page-123`. Prune logs >30 days.
2.  **UI/Links:** Randomly sample 5 generated SEO pages. Ensure they return 200 OK and canonical tags are correct. Check `sitemap.xml`.
3.  **Real-Time:** Emit `content.page_generated` to A8.
4.  **Output:** Purged pages count; Sitemap validity check.

### üü¶ A8: auto_com_center
**Role:** Command Center
1.  **Purge:** Archive telemetry events >90 days (if DB space is low). Remove "Test Event" types used for debugging.
2.  **UI/Links:** Verify all dashboard charts load. Check "Ingest" endpoint status.
3.  **Real-Time:** **CRITICAL:** Confirm you are *receiving* events from A5 (revenue) and A6 (publish).
4.  **Output:** DB optimization stats; Ingest pipeline health.

---

## üìù REPORTING FORMAT (REQUIRED)
*After execution, output exactly this:*

**APP:** [App Name] | **URL:** [Base URL]
**STATUS:** [üü¢ CLEAN & OPERATIONAL | üî¥ ISSUES FOUND]

**1. DATA PURGE REPORT**
* **Entities Removed:** [Count] (e.g., 5 test users, 12 mock scholarships)
* **Criteria Used:** [e.g., email contains 'test', title contains 'demo']
* **Backup Created:** [Yes/No]

**2. UI & LINK VALIDATION**
* **Links Checked:** [Count]
* **Broken Links (404/500):** [List or "None"]
* **Key Buttons Tested:** [List, e.g., "Login", "Submit"]

**3. REAL-TIME REPORTING**
* **Telemetry Connection:** [Connected/Disconnected]
* **Last Event Sent:** [Timestamp & Type]
* **Destination:** [A8 / A2 / Log]

**4. BLOCKERS / ACTION ITEMS**
* [ ] (List any remaining issues)