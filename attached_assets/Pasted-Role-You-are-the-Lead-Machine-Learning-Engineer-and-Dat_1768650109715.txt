Role:You are the Lead Machine Learning Engineer and Data Scientist for the Scholar Ecosystem. Your mandate is to fix the "Trust Leak" caused by False Positive (FP) scholarship matches. You are operating within a Replit environment.Strategic Context:We are experiencing high FPR because our current matching is too "fuzzy" (pure vector/semantic search). We are showing students scholarships they are strictly ineligible for (wrong GPA, wrong state, expired deadlines). This destroys user trust and increases churn.Mission (Definition of Done):Hybrid Search Implementation: Replace "Pure Vector Search" with "Hybrid Search." Hard SQL filters (GPA, State, Major, Deadline) must apply before or during the vector similarity search.Evidence-Based Matching: Every match displayed to a student must include a "Why You Qualify" citation, referencing the exact text snippet from the source document.Metric Targets: Reduce FPR by $\ge$ 40%. Maintain Recall loss $\le$ 10%.Zero-Staleness: All eligibility checks must happen in real-time (staleTime: 5s).Stop Rules (Halt Immediately If):Inference latency per user request exceeds 3.0 seconds (P95).The "Hard Filters" result in Zero Matches for >50% of users (indicates over-filtering).Any PII is logged to the console.Execution PlanPhase 1: Diagnosis & Baseline (The Audit)Sample: Retrieve the last 100 "Matches" generated by the system.Audit: Compare User Profile Data vs. Scholarship Eligibility Criteria.Label: Tag each match as:TP (True Positive): User meets ALL hard requirements.FP (False Positive): User fails at least one hard requirement (e.g., User GPA 3.0 vs Req 3.5).Metric: Calculate current FPR (FP / (TP + FP)).Phase 2: The "Filter-First" Architecture (The Fix)Modify src/lib/matching.ts or the Python backend:A) The Hard Filter Gate (SQL Layer)Before calling the LLM/Vector DB, execute a strict SQL WHERE clause:WHERE deadline >= NOW()AND (min_gpa IS NULL OR min_gpa <= user.gpa)AND (state_residency IS NULL OR state_residency = user.state)AND (education_level IN user.levels)B) The Semantic Ranker (Vector Layer)Only perform vector similarity search on the filtered subset. This ensures every result is legally valid, even if semantically less perfect.C) The Citation Layer (RAG Verification)For the Top 5 matches, pass the Scholarship Description and Student Profile to a lightweight LLM (e.g., GPT-4o-mini or Claude Haiku) with this system prompt:"Verify eligibility. If eligible, extract the exact sentence from the text that proves it. If ineligible, output NULL."Discard any match where the LLM outputs NULL.Phase 3: Real-Time EnforcementAPI: Ensure the /matches endpoint sets Cache-Control: no-store.Frontend: The UI must display the extracted "Evidence Snippet" next to the match confidence score.Required Deliverables (JSON Format)1. fp_audit_report.jsonJSON{
  "baseline_fpr": 0.XX,
  "root_causes": ["GPA Mismatch", "Expired Deadline", "Wrong Major"],
  "sample_size": 100
}
2. hybrid_search_config.jsonJSON{
  "hard_filters_implemented": ["gpa", "residency", "deadline", "major"],
  "vector_weight": 0.7,
  "keyword_weight": 0.3
}
3. verification_scorecard.jsonJSON{
  "post_fix_fpr": 0.XX,
  "latency_p95": "X.Xs",
  "reduction_percentage": "XX%"
}
4. runbook_entry.mdA concise guide on how to tune the "Hard Filters" if valid scholarships are being hidden (False Negatives).GO.