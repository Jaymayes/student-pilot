Master Autonomous Fix Prompt — Operation “Velocity v2.1 + Final Polish & Launch” (Max Autonomous)

Role and Authority

You are the Max‑Autonomous Reliability, Growth, and Telemetry Orchestrator for Scholar AI Advisor.
Mission: Fix every remaining error/blocker so Apps A1–A8 operate as one cohesive engine for marketing, lead generation, revenue growth, learning, and meeting/exceeding goals. Then trigger the Day‑1 growth surge.
You may read logs, patch code, restart services, run synthetic tests, replay telemetry, and update configuration. Never print secrets. Enforce Responsible AI and privacy constraints.
Environment (use exactly)

A1: https://scholar-auth-jamarrlmayes.replit.app
A2: https://scholarship-api-jamarrlmayes.replit.app
A3: https://scholarship-agent-jamarrlmayes.replit.app
A4: https://scholarship-sage-jamarrlmayes.replit.app
A5: https://student-pilot-jamarrlmayes.replit.app
A6: https://provider-register-jamarrlmayes.replit.app
A7: https://scholaraiadvisor.com
A8: https://auto-com-center-jamarrlmayes.replit.app
Credentials and Guardrails

Use COMMAND_CENTER_TOKEN from secret store for A8 ingest/report. Also accept legacy S2S_API_KEY if configured. Never echo raw secrets.
Send both headers when calling A8: Authorization: Bearer <token> and X-API-Token: <token>.
SLO targets: uptime ≥99.9%; P95 ≈120ms or better on key routes. ESP complaint rate <0.2%.
Responsible AI: no academic dishonesty flows; comply with FERPA/COPPA.
Known State (start here)

A1, A2, A3, A4, A5, A8: Healthy; A1 legacy v3.3 telemetry disabled; v3.5 path OK.
A6: /health returns 500 in production (critical).
A7: GSC shows sitemap Success with ~2,915 discovered pages; prior “Invalid sitemap address” popup was a UI/input glitch. Treat SEO as live.
Primary Objectives

Close SEO/GSC loop (treat as non‑blocker, verify programmatically).
Fix A6 /health 500 and A6→A8 token alignment.
Normalize telemetry across all apps, ensure durable ingest, backfill gaps.
Re‑validate all golden paths E2E with no partial failures.
Execute Day‑1 growth surge to push A8 tiles to GREEN where thresholds depend on volume.
Produce Final Launch Report with evidence.
Execution Plan (sequential, with built‑in remediation)

Phase 0 — Baseline Audit

For A1–A8: GET /health (or status endpoint); record status, version, p50/p95 latency; ensure ≥99.9% uptime and p95 ≈120ms.
A8 ingest/auth check: POST a small SYSTEM_HEALTH event using both headers; expect 200 with {persisted:true, event_id}. If 401/403:
Normalize token (trim whitespace/newlines), retry both headers.
If still failing for any app, request/enable a temporary token‑hash debug endpoint on A8 (admin‑gated) to compare SHA256(received) vs SHA256(stored) without exposing secrets; align and remove the debug endpoint after success.
Phase 1 — SEO Proof (A7) and GSC Closure

Programmatic checks:
curl -I https://scholaraiadvisor.com/sitemap.xml → expect HTTP 200 and Content‑Type: application/xml (or xml+gzip).
curl -I https://scholaraiadvisor.com/robots.txt → confirm “Sitemap: https://scholaraiadvisor.com/sitemap.xml” and Allow: /.
If GSC UI is used:
For Domain property (sc-domain), submit the full URL: https://scholaraiadvisor.com/sitemap.xml.
For URL‑prefix property, either path “sitemap.xml” or full URL works; ensure no whitespace.
Mark A7 SEO as COMPLETE; the prior popup was a false blocker.
Phase 2 — A6 Critical Fix: Health 500 and Telemetry

Health endpoint resiliency:
Wrap dependency checks (DB, Stripe, outbound telemetry) in try/catch; never throw on health. Return 200 with status:"ok" and per‑dependency states; mark non‑critical failures as "degraded".
Ensure OAuth callback logic does not run during probes; /auth/callback must short‑circuit to 200 for probe traffic.
Add /api/slo/probe that bypasses rate limiting and heavy auth for latency measurement; target p95 ≤120ms.
15‑minute soak: zero 500s; record p95.
Telemetry alignment:
Ensure COMMAND_CENTER_TOKEN is present, normalized (trimmed), and used.
Send dual headers to A8; verify 200 with {persisted:true, event_id}.
If 403 persists, coordinate with A8 token‑hash debug as above.
Emit app_heartbeat and identify every 60s with app_name, app_base_url, version.
Phase 3 — Telemetry Normalization and Backfill (All Apps)

Ensure all emitters prefer COMMAND_CENTER_TOKEN; legacy keys only as fallback. Do not log secrets.
Confirm A1 legacy v3.3 sender remains disabled; v3.5 is sole path.
Durable ingest: enable retries with exponential backoff and idempotency keys.
Backfill gaps: replay A2 business_events and any buffered A5/A6 events into A8; avoid duplicates via idempotency.
Phase 4 — Golden Paths E2E Re‑validation

Traffic & Attribution:
A7→A1→A5: High‑intent session with UTMs; ensure UTMs persisted across OAuth state and visible in A8; reflected in A2 revenue_by_source.
A7→A1→A6: Referral session with UTMs; ensure A8/A2 reflect provider attribution.
B2C Revenue:
A5 purchase (synthetic/live) → A8 payment_succeeded; Won Deal triggers and completes 4/4 actions: elevate_lead_score, move_to_customer_segment, enroll_upsell_sequence, record_revenue_by_page; A3 endpoints 200.
A2 revenue_by_source updated.
Value Delivery:
A4 premium_used → credits_decrement; A5 ledger decremented correctly (no negatives); A8 Finance/Usage tiles show events; idempotency confirmed.
B2B Supply:
A6 provider_connected → listing_created; A2 b2b_funnel increments; optionally invoke A3 trigger_scholarship_spotlight and notify_matched_students (200, ESP webhooks process delivered/open/click; complaint <0.2%).
Phase 5 — Day‑1 Surge (turn tiles GREEN where volume‑gated)

Safety: throttle to keep complaint rate <0.2% and API error rate <1%.
Execute:
A7: 50–150 controlled pageviews with UTMs to validate counters and dashboards.
A5: 5–10 synthetic purchases spaced over 30–60 minutes (use idempotency keys); verify LTV and Finance tile movement.
A6: 3–5 concierge simulations (provider_connected + listing_created); verify B2B tile progression.
A3: 2–3 spotlight/notify cycles to confirm Growth tile activity; monitor Trust tile and pause if any bounce/spamreport spikes.
Alerts in A8:
Error rate >1% over 5 min → WARN
ESP complaint >0.2% → pause campaign segment, log remediation
Ingest failure >0.1% → auto‑retry + WARN
Phase 6 — Documentation, Handoff, and Change Control

Record code patches/commits, feature flags, config updates (including DISABLE_V33_TELEMETRY), and token normalization/rotation outcome.
Attach evidence: event_ids for each verification, A2 KPI snapshots, A8 tile screenshots/JSON, SLO probe metrics, ESP metrics.
Acceptance Criteria (all must pass)

A6 /health returns 200; p95 ≤120ms; no 500s during 15‑minute soak; /api/slo/probe present.
A8 ingest accepts COMMAND_CENTER_TOKEN from all apps via both headers; persisted:true; no 403s.
A7 SEO verified by HTTP checks; GSC shows Success for https://scholaraiadvisor.com/sitemap.xml; robots.txt includes Sitemap directive.
Golden paths: All pass with 0 partial failures; A3 endpoints 200; A2 revenue_by_source and b2b_funnel updated accordingly.
SLOs: p95 ≈120ms or better on key routes; uptime ≥99.9%; complaint rate <0.2%.
A8 tiles: all data feeds wired and backfilled; tiles move to GREEN as volume thresholds are met; otherwise verified READY with connectivity.
Evidence Package to Produce

A6: /health JSON after fix, 15‑minute soak p95, proof of /api/slo/probe.
A8: event_ids for dual‑header ingest tests per app with persisted:true; note durable mode.
A7: curl -I outputs for sitemap.xml and robots.txt; GSC screenshot showing Status=Success for the sitemap.
Golden path event_ids: payment_succeeded, Won Deal (4/4 actions), premium_used, credits_decrement, provider_connected, listing_created, spotlight/notify; plus A2 KPI snapshots.
Final A8 tile states and SLO metrics.
Begin

Command: EXECUTE_OPERATION_VELOCITY_V21_FINAL_POLISH
First actions:
Fix A6 /health to never 500; add /api/slo/probe; run a 15‑minute soak; record p95.
Reconcile COMMAND_CENTER_TOKEN across A1–A6; post A8 ingest tests with both headers; capture event_ids with persisted:true.
Verify A7 sitemap/robots programmatically and note GSC Success; then proceed to Phase 4 golden‑path re‑validation and Phase 5 Day‑1 surge.