Below is a single, identity‑aware test prompt for verifying B2C (student) and B2B (provider) login across the full system. Each app has its own section. Every agent must only execute the section that matches their app. Agent3 has its own detailed section and must strictly limit execution to that section.

System registry (reference only; do not act on other apps)

A1 scholar_auth → https://scholar-auth-jamarrlmayes.replit.app
A2 scholarship_api → https://scholarship-api-jamarrlmayes.replit.app
A3 scholarship_agent → https://scholarship-agent-jamarrlmayes.replit.app
A4 scholarship_sage → https://scholarship-sage-jamarrlmayes.replit.app
A5 student_pilot → https://student-pilot-jamarrlmayes.replit.app
A6 provider_register → https://provider-register-jamarrlmayes.replit.app
A7 auto_page_maker → https://auto-page-maker-jamarrlmayes.replit.app
A8 auto_com_center → https://auto-com-center-jamarrlmayes.replit.app
Global rules for all agents

Identify first: Before any work, print exactly: APP: <app_name> | APP_BASE_URL: <base_url>
Scope discipline: Execute only the section for your app ID. Ignore all others.
Read‑only by default: Do not change code or configs. If a hard blocker (e.g., CAPTCHA, external account limit) prevents testing, capture evidence and stop.
Evidence: Record key response codes, Location headers, Set-Cookie flags, and any error fields. Note cookie SameSite and Secure flags if visible.
Reporting: Every output must begin with the identity line and follow the Mandatory Report Format at the end.
Definitions: B2C = A5 student_pilot login via A1. B2B = A6 provider_register login via A1.
A1 ONLY — scholar_auth (Identity Provider)
APP: scholar_auth | APP_BASE_URL: https://scholar-auth-jamarrlmayes.replit.app
Goal: Verify OIDC readiness for both B2C and B2B clients and detect issues that cause “Session Expired” after Authorize.
Tests:

Discovery and JWKS
GET /.well-known/openid-configuration → expect 200; capture authorization_endpoint, token_endpoint.
GET /.well-known/jwks.json → expect 200; keys array non‑empty.
Dry‑run authorize for A5 (B2C)
Build authorize URL with response_type=code, client_id=student-pilot, redirect_uri=https://student-pilot-jamarrlmayes.replit.app/api/auth/callback, scope=openid email profile, code_challenge_method=S256, code_challenge=<dummy base64url>, state and nonce.
GET the URL with redirects disabled; capture status and Location; confirm Set-Cookie for interaction/session on first redirect.
Dry‑run authorize for A6 (B2B)
Same as above with client_id=provider-register, redirect_uri=https://provider-register-jamarrlmayes.replit.app/auth/callback (or configured).
Cookie/PKCE evidence
If error=invalid_request…requires PKCE → confirm client sends code_challenge + method=S256.
If “Session Expired” on /oidc/interaction/.../confirm → capture whether the POST includes the interaction cookie; note SameSite=None; Secure. Pass/Fail:
PASS: discovery and JWKS healthy; both authorize URLs redirect properly; interaction cookie set.
FAIL: “Session Expired” on confirm or PKCE errors on authorize, with evidence.
A5 ONLY — student_pilot (B2C client)
APP: student_pilot | APP_BASE_URL: https://student-pilot-jamarrlmayes.replit.app
Goal: Verify student login initiation and PKCE/S256 compliance.
Tests:

Login redirect
GET /api/auth/login (or documented login route) with redirects disabled → expect 302/303/307 to A1 /oidc/auth with client_id=student-pilot, scope includes openid, code_challenge_method=S256, code_challenge present, redirect_uri=/api/auth/callback.
Callback safety (negative)
GET /api/auth/callback?error=access_denied&state=<dummy> with redirects disabled → expect graceful 302 to homepage/login; no 5xx.
Session indication (post-login smoke)
If feasible, verify session cookie present and /api/me (or equivalent) returns 200; otherwise mark Not Executed and provide redirect evidence. Pass/Fail:
PASS: PKCE S256 present and correct redirect_uri; error callback safe.
FAIL: Missing PKCE or wrong client_id/redirect_uri; 5xx on callback.
A6 ONLY — provider_register (B2B client)
APP: provider_register | APP_BASE_URL: https://provider-register-jamarrlmayes.replit.app
Goal: Verify provider login initiation and PKCE/S256 compliance.
Tests:

Login redirect
GET /api/auth/login (or documented route) with redirects disabled → expect 302/303/307 to A1 with client_id=provider-register, scope includes openid, code_challenge_method=S256, code_challenge present, redirect_uri=/auth/callback (or configured).
Callback safety (negative)
GET /auth/callback?error=access_denied&state=<dummy> with redirects disabled → expect graceful 302; no 5xx. Pass/Fail:
PASS: PKCE S256 + correct redirect_uri; safe error callback.
FAIL: Missing PKCE, wrong client_id/redirect_uri, or 5xx.
A7 ONLY — auto_page_maker (Funnel)
APP: auto_page_maker | APP_BASE_URL: https://auto-page-maker-jamarrlmayes.replit.app
Goal: Validate funnel links route to A5/A6 with UTM attribution; no local login.
Tests:

CTA links exist to:
A5 with utm_source=auto_page_maker
A6 with utm_source=auto_page_maker
Endpoint reachability: HEAD/GET those targets; expect 200 shell or 3xx to login.
No local auth endpoints: /api/auth/login, /auth/login, /login should not be server auth handlers. Pass/Fail:
PASS: CTAs exist with UTM; targets respond; no local login handlers.
FAIL: Missing/broken CTAs or absent UTM.
A2 ONLY — scholarship_api (Support API)
APP: scholarship_api | APP_BASE_URL: https://scholarship-api-jamarrlmayes.replit.app
Goal: Confirm no login routes; protected endpoints require tokens; no PII leaks.
Tests:

GET /health → 200.
Probe /api/auth/login, /auth/login, /login → expect 404/401.
Protected endpoint without token (e.g., credits/balance) → 401/403/422; no PII in error. Pass/Fail:
PASS: Health OK; no login routes; protected endpoints reject safely.
FAIL: Exposes login or leaks sensitive data.
A4 ONLY — scholarship_sage (Support app)
APP: scholarship_sage | APP_BASE_URL: https://scholarship-sage-jamarrlmayes.replit.app
Goal: Confirm defers identity to A1; no broken login routes.
Tests:

If login entry exists: GET login route with redirects disabled → expect redirect to A1 /oidc/auth with PKCE.
If no login entry (uses A5), mark N/A and confirm no local auth endpoints exposed. Pass/Fail:
PASS: Defers to A1 with PKCE or N/A clean.
FAIL: Local login without OIDC/PKCE or errors.
A8 ONLY — auto_com_center (Telemetry)
APP: auto_com_center | APP_BASE_URL: https://auto-com-center-jamarrlmayes.replit.app
Goal: Validate telemetry readiness to observe login events.
Tests:

GET /healthz or /health → 200.
If available, POST a test telemetry event (e.g., login_attempt) → 200/202.
Confirm no user login endpoints exist. Pass/Fail:
PASS: Health OK; ingest accepts test event; no login endpoints.
FAIL: Telemetry API unavailable.
A3 ONLY — scholarship_agent (Agent3) — STRICT SCOPE FOR THIS APP
APP: scholarship_agent | APP_BASE_URL: https://scholarship-agent-jamarrlmayes.replit.app

Agent3 must do only this:
Goal

Confirm A3 has no first‑party login endpoints and references A1 as issuer for any internal service calls.
Confirm marketing does not intercept or spoof login flows.
Confirm any funnels/CTAs in A3 route users to A5 (B2C) or A6 (B2B), never to any local login path.
Tests to run

Health: GET /api/health → expect 200.
No login endpoints:
Probe /api/auth/login, /auth/login, /login → expect 404/405/401; if 200 with text/html shell, note this is SPA fallback, not auth.
Issuer reference (read‑only):
If configuration exposes an issuer/ENV, confirm it points to A1: https://scholar-auth-jamarrlmayes.replit.app/oidc.
Funnel links:
If A3 renders CTAs, verify hrefs target A5 or A6 and carry UTM where applicable; never to local login.
Telemetry sanity:
If a test endpoint exists, POST a “marketing_intent” or similar non‑login event; expect 200/202. Confirm no login telemetry originates from A3.
Pass/Fail

PASS: No local login endpoints; issuer points to A1; CTAs route to A5/A6; telemetry is non‑auth.
FAIL: Any A3 route tries to handle login; CTAs misroute; issuer not A1.
Known failure patterns to watch (all apps; evidence only)

“Session Expired” after Authorize: often indicates interaction cookie not returned on POST /confirm due to third‑party cookie blocking or SameSite mis‑handling. Capture whether the POST included the interaction cookie and the cookie flags observed.
“requires PKCE” on authorize: indicates missing code_challenge/method=S256. Capture the authorize URL params to prove absence.
Mandatory Report Format (all apps)

Always start with the identity line.
APP: <app_name> | APP_BASE_URL: <base_url>
STATUS: [PLANNED | IN_PROGRESS | COMPLETE | BLOCKED]
TIMEFRAME: [UTC start → UTC end]

ACTIONS TAKEN
[bullet list of checks performed with endpoints and key headers/evidence]
2. B2C LOGIN (A5) RESULTS

[PASS/FAIL/NA] Evidence: [redirect URL, PKCE presence, redirect_uri]
3. B2B LOGIN (A6) RESULTS

[PASS/FAIL/NA] Evidence: [redirect URL, PKCE presence, redirect_uri]
4. OBSERVATIONS AND EVIDENCE

[key response codes, Location headers, Set-Cookie flags, error fields, timestamps]
5. ROOT‑CAUSE AND RISK (IF ANY)

[e.g., “PKCE missing on A5 redirect” or “Session Expired due to missing interaction cookie on confirm”]
6. RECOMMENDED NEXT STEP (24–48 HOURS)

[one high‑ROI action; specify owner app]
END OF REPORT

Agent3 final reminder

You are A3 (scholarship_agent). Execute only the A3 section above.
Begin every output with: APP: scholarship_agent | APP_BASE_URL: https://scholarship-agent-jamarrlmayes.replit.app
Your report must clearly state PASS/FAIL/NA for B2C and B2B and include evidence for your own endpoints and any CTAs rendered (if any).