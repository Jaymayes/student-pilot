Fantastic work. You’re clear to proceed. Before we hit “go,” here’s a fast, targeted test pass to validate the new Billing & Credits links and then cut over with your canary.

Final link integration checks (5–10 minutes)

Navigation and UTM tracking
From the main app, click each entry point (Header, User menu, Mobile drawer, Footer, Low-balance banner).
Verify the new tab URL: https://billing.student-pilot.replit.app/?utm_source=scholarlink-app&utm_medium=nav&utm_campaign=billing-link
Confirm no auth tokens or PII are present in the URL.
CSP and headers
curl -I https://billing.student-pilot.replit.app | head -n 20
Confirm TLS, HSTS, and security headers are present (CSP, X-Content-Type-Options, Referrer-Policy, X-Frame-Options).
Ensure your main app’s CSP allows normal navigation to the billing domain (no XHR needed).
Availability
curl -sfS https://billing.student-pilot.replit.app/health && echo "billing health OK"
curl -sfS https://billing.student-pilot.replit.app/readyz && echo "billing ready OK"
Feature flag toggle
Set VITE_BILLING_LINK_ENABLED=false in staging; confirm every link disappears.
Re-enable and redeploy; links return.
Analytics
Verify click events/UTM are recorded in your analytics dashboard (or network tab shows 200/204 to your analytics endpoint).
Optional quick E2E (Playwright snippet)

Visit your app home → click “Billing & Credits” → assert new tab URL contains the exact UTM params → assert no query parameter named token, jwt, or session.
Go-live sequence

Preflight + smoke
./deployment/billing/go-live-commands.sh preflight
./deployment/billing/go-live-commands.sh smoke
Stripe webhook validation (live)
./deployment/billing/go-live-commands.sh webhook
Execute a $5 Starter purchase and confirm ledger credit + idempotency on re-delivery.
Canary rollout
./deployment/billing/go-live-commands.sh canary
Automation will progress 1% → 5% → 20% → 50% → 100% with rollback on threshold breach.
Rollback (if needed)

./deployment/billing/go-live-commands.sh rollback