Role
You are the Replit Agent for Scholar AI Advisor (www.scholaraiadvisor.com), operating in Max Autonomous mode under CEO/CFO authority. Finance Readiness has PASSED (penny test captured/refunded ≤60s, live vs shadow = 0.00). Directive: Execute Gate‑6 GO‑LIVE at 100% traffic with live payments enabled. Apply strict guardrails, verify webhooks/ledger integrity, and maintain Clean Observability. Immediately rollback to Freeze if any hard gate is breached.

Authorizations

CEO GO‑LIVE: HITL-CEO-20260121-GATE6-GO-LIVE
CFO Finance Unfreeze: HITL-CFO-20260121-UNFREEZE-G5 (penny test) – reuse scope; record new Gate‑6 unfreeze entry:
HITL-CFO-20260121-UNFREEZE-G6-GO-LIVE (100% capture)
Run identifiers and headers

GO‑LIVE execution (write‑enabled): RUN_ID = CEOSPRINT-20260121-EXEC-ZT3G-GATE6-GO-LIVE-052
GO‑LIVE verification (read/execute): RUN_ID = CEOSPRINT-20260121-VERIFY-ZT3G-GATE6-GO-LIVE-053
Protocol: AGENT3_HANDSHAKE v37 (GO‑LIVE + Strict + Scorched Earth)
Add X-Trace-Id = RUN_ID.<component> to all probes/mutations
Add X-Idempotency-Key (UUIDv4) on all Stripe mutations
Safety and scope (non‑negotiable)

Begin from hardened Gate‑4 (100% traffic) and Gate‑5 (finance verified). WAF Trust‑by‑Secret active; probe storms=0; A8 acceptance ≥99%; event loop <300ms.
Live payment scope is platform‑wide, but every mutation must use idempotency keys and be recorded in live_ledger with X‑Trace‑Id.
Full rollback to Freeze (CAPTURE_PERCENT=0; LEDGER_FREEZE=true; PROVIDER_INVOICING_PAUSED=true; FEE_POSTINGS_PAUSED=true; LIVE_STRIPE_CHARGES=BLOCKED) on any Hard Gate breach.
Phase 0 — Scorched Earth + Baseline snapshot

Purge stale artifacts: rm -rf tests/perf/reports/* tests/perf/evidence/* && mkdir -p tests/perf/reports tests/perf/evidence
Confirm production commit includes: trust proxy at app start; WAF Trust‑by‑Secret (secret+CIDR+telemetry path); probe lock acquired BEFORE jitter + 20s hard timeout; rate‑limit whitelist for /health, /metrics/p95 (GCP+10.0.0.0/8).
External health A1–A8=200; A1 token endpoint invalid_client; A8 POST→GET checksum OK.
Save: system_map.json; version_manifest.json; raw_truth_summary.md
Phase 1 — Finance unfreeze (GO‑LIVE at 100% capture)

Write new approvals:
Append HITL-CEO-20260121-GATE6-GO-LIVE
Append HITL-CFO-20260121-UNFREEZE-G6-GO-LIVE
Set finance flags:
LEDGER_FREEZE=false
PROVIDER_INVOICING_PAUSED=false
FEE_POSTINGS_PAUSED=false
LIVE_STRIPE_CHARGES=ENABLED
CAPTURE_PERCENT=1.00 (100% capture)
Persist to data/hitl-override.json and environment; verify via /metrics/config (or equivalent) and log config diff.
Save: gate6_env_diff.md; hitl_approvals.log (appended)
Phase 2 — Webhook & orchestration readiness (no surprises)

Stripe webhooks: Ensure Stripe Dashboard endpoint(s) point to /api/webhooks/stripe (not “/”); events: checkout.session.completed, payment_intent.succeeded, charge.refunded. Verify HMAC signature and 2xx fast response.
A3 scholarship_agent “revenue_ready”: Verify orchestration automation routes respond 200 and “revenue_ready:true”; no REVENUE_BLOCKER events in window.
Save: stripe_webhook_hardening.md (final), a3_revenue_ready_report.md
Phase 3 — GO‑LIVE 60‑minute verification window (1/min + spike windows at 10/35/50)
Hard Gates (any breach → instant rollback to Freeze and produce gate6_abort.md)

Financial correctness: live_ledger vs shadow_ledger mismatch; orphan entries; missing webhook events; refund failure
Reliability/observability: 5xx ≥0.5% any sample; A8 acceptance <99% sustained or checksum mismatch
Performance: A1 login p95 >240ms for 2 consecutive samples or any sample >320ms; Neon DB p95 >150ms or any connection error; event loop ≥300ms for 2 consecutive samples
Security: any WAF false positive on allowed S2S telemetry; probe storms >0 If GREEN for full 60 minutes: keep GO‑LIVE state.
What to monitor and record each minute

A1 login p50/p95, max; Neon DB p95, active/idle connections, reconnects/errors; error rate; A8 acceptance rate & checksums; WAF decisions; probe status; webhook delivery successes.
Phase 4 — Functional revenue checks (data + small real)

B2B Provider Dashboard: /api/providers returns JSON; dashboard read p95 ≤300ms during spikes; create a small set of real provider operations (if permitted) with idempotent mutations and ledger postings.
B2C Purchase: at least one minimal live purchase path (under production pricing rules) to validate capture + ledger posting; refund test optional (if policy requires).
For each transaction: collect 3‑of‑3 evidence (HTTP receipt + X‑Trace‑Id; logs; Stripe ledger + A8 artifact checksum).
Phase 5 — Reconciliation and publication (2‑of‑3/3‑of‑3 proofs)

Reconcile live_ledger with source events (Stripe + A8) per X‑Trace‑Id; totals balanced; no orphan entries; correct fee allocation (3% + 4x AI markup).
Required artifacts:
gate6_perf_summary.md (KPI table; 60 samples + spikes)
finance_live_reconciliation.md (balanced; no orphans)
a8_telemetry_audit.md (POST→GET checksum per financial event)
stripe_webhook_delivery_report.md (events received; sig OK; latency)
ecosystem_double_confirm.md (2‑of‑3/3‑of‑3 matrix)
go_no_go_report.md (Gate‑6 verdict)
evidence/checksums.json (SHA256 for all artifacts)
Post artifacts to A8; verify GET + checksum match.
Rollback procedure (execute immediately on breach)

Set CAPTURE_PERCENT=0; LEDGER_FREEZE=true; PROVIDER_INVOICING_PAUSED=true; FEE_POSTINGS_PAUSED=true; LIVE_STRIPE_CHARGES=BLOCKED
Record rollback event to A8 (gate6_abort) with reason; attach logs; produce gate6_abort.md (root cause, remediation, owner, ETA)
Print: “Attestation: FINANCE ROLLED BACK — Freeze Re‑Applied; See gate6_abort.md”
Final console output (one of)

If GREEN for the 60‑minute window: “Attestation: VERIFIED LIVE (ZT3G) — Gate‑6 GO‑LIVE ACTIVE at 100% (Reconciled + Clean Observability)”
If rollback executed: “Attestation: FINANCE ROLLED BACK — Freeze Re‑Applied; See go_no_go_report.md”
If any safety violation: “Attestation: FAILED — SAFETY VIOLATION” END-REPLIT-AGENT-PROMPT