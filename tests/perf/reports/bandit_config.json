{
  "protocol": "AGENT3_HANDSHAKE",
  "protocol_version": "v27",
  "version": "1.0.0",
  "timestamp": "2026-01-09T00:00:00Z",
  "type": "multi_armed_bandit_config",
  "phase": "D",
  "integration": {
    "primary_app": "A5_student_pilot",
    "telemetry_endpoint": "A8_auto_com_center",
    "orchestration": "A3_scholarship_agent",
    "analytics_sink": "A7_programmatic_seo"
  },
  "algorithm": {
    "primary": "thompson_sampling",
    "fallback": "ucb1",
    "parameters": {
      "thompson_sampling": {
        "prior_alpha": 1.0,
        "prior_beta": 1.0,
        "batch_update": true,
        "batch_size": 100
      },
      "ucb1": {
        "exploration_constant": 2.0,
        "confidence_level": 0.95
      }
    }
  },
  "exploration_exploitation": {
    "strategy": "adaptive",
    "initial_exploration_rate": 0.3,
    "minimum_exploration_rate": 0.05,
    "decay_type": "exponential",
    "decay_rate": 0.99,
    "warmup_samples_per_arm": 100,
    "forced_exploration": {
      "enabled": true,
      "frequency_percent": 5,
      "distribution": "uniform"
    }
  },
  "experiments": {
    "pricing_tiers": {
      "experiment_id": "exp_pricing_001",
      "status": "active",
      "start_date": "2026-01-09",
      "arms": {
        "starter": {
          "arm_id": "pricing_starter",
          "price_usd": 9.99,
          "credits": 50,
          "features": ["basic_matching", "5_applications"],
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.33
        },
        "professional": {
          "arm_id": "pricing_professional",
          "price_usd": 24.99,
          "credits": 150,
          "features": ["advanced_matching", "unlimited_applications", "essay_assist"],
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.34
        },
        "enterprise": {
          "arm_id": "pricing_enterprise",
          "price_usd": 49.99,
          "credits": 500,
          "features": ["premium_matching", "unlimited_applications", "essay_assist", "priority_support", "counselor_access"],
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.33
        }
      },
      "success_metric": "conversion_rate",
      "secondary_metrics": ["revenue_per_user", "retention_30d"],
      "minimum_detectable_effect": 0.05,
      "statistical_significance": 0.95
    },
    "cta_variants": {
      "experiment_id": "exp_cta_001",
      "status": "active",
      "start_date": "2026-01-09",
      "arms": {
        "action_oriented": {
          "arm_id": "cta_action",
          "button_text": "Start Your Journey",
          "messaging": "Find scholarships tailored just for you",
          "color_scheme": "primary_gold",
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.25
        },
        "urgency_based": {
          "arm_id": "cta_urgency",
          "button_text": "Get Started Now",
          "messaging": "Deadlines are approaching - don't miss out",
          "color_scheme": "accent_red",
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.25
        },
        "value_focused": {
          "arm_id": "cta_value",
          "button_text": "Unlock $50K+ in Scholarships",
          "messaging": "Students like you have won over $2M in awards",
          "color_scheme": "primary_blue",
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.25
        },
        "social_proof": {
          "arm_id": "cta_social",
          "button_text": "Join 10,000+ Students",
          "messaging": "See why students trust ScholarLink",
          "color_scheme": "neutral_dark",
          "prior": {"alpha": 1, "beta": 1},
          "traffic_allocation": 0.25
        }
      },
      "success_metric": "click_through_rate",
      "secondary_metrics": ["signup_rate", "time_to_first_action"],
      "minimum_detectable_effect": 0.03,
      "statistical_significance": 0.95
    }
  },
  "assignment": {
    "method": "deterministic_hash",
    "hash_key": "user_id",
    "salt": "bandit_v27_2026",
    "sticky_assignment": true,
    "assignment_ttl_days": 30
  },
  "monitoring": {
    "real_time_metrics": [
      "arm_selection_count",
      "arm_reward_sum",
      "arm_reward_mean",
      "arm_confidence_interval",
      "regret_estimate"
    ],
    "reporting": {
      "destination": "A8_telemetry",
      "frequency_minutes": 5,
      "dashboard_refresh_seconds": 30
    },
    "alerts": {
      "arm_significantly_worse": {
        "threshold_confidence": 0.99,
        "action": "reduce_traffic",
        "notification": ["ml_engineer", "product_manager"]
      },
      "winner_declared": {
        "threshold_confidence": 0.95,
        "min_samples_per_arm": 1000,
        "action": "notify_for_graduation",
        "notification": ["product_manager", "policy_admin"]
      }
    }
  },
  "guardrails": {
    "minimum_traffic_per_arm_percent": 5,
    "maximum_traffic_per_arm_percent": 50,
    "automatic_stopping": {
      "enabled": true,
      "stop_on_harm": {
        "metric": "conversion_rate",
        "threshold_drop_percent": 30,
        "confidence": 0.99
      }
    },
    "hitl_required_for": [
      "experiment_creation",
      "arm_removal",
      "traffic_reallocation_gt_20_percent",
      "experiment_graduation"
    ]
  },
  "data_collection": {
    "events": [
      {
        "event_type": "arm_assignment",
        "fields": ["user_id", "experiment_id", "arm_id", "timestamp"]
      },
      {
        "event_type": "arm_reward",
        "fields": ["user_id", "experiment_id", "arm_id", "reward_value", "reward_type", "timestamp"]
      },
      {
        "event_type": "experiment_snapshot",
        "fields": ["experiment_id", "arm_stats", "timestamp"]
      }
    ],
    "retention_days": 90,
    "anonymization": {
      "enabled": true,
      "method": "hashing",
      "pii_fields": ["user_id"]
    }
  },
  "graduation_criteria": {
    "minimum_runtime_days": 14,
    "minimum_samples_per_arm": 1000,
    "required_confidence": 0.95,
    "practical_significance": {
      "conversion_rate_lift_percent": 5,
      "revenue_lift_percent": 10
    },
    "approval_workflow": {
      "auto_graduate": false,
      "approvers": ["product_manager", "data_scientist"],
      "documentation_required": true
    }
  }
}
