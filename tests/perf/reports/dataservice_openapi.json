{
  "openapi": "3.0.3",
  "info": {
    "title": "Scholar DataService API",
    "description": "Centralized data access layer for the Scholar AI Advisor ecosystem. Provides RESTful APIs for managing core domain objects with built-in authentication, authorization, FERPA compliance, and audit capabilities.",
    "version": "1.0.0",
    "contact": {
      "name": "Scholar AI Engineering",
      "email": "engineering@scholaraiadvisor.com"
    },
    "x-run-id": "CEOSPRINT-20260121-EXEC-ZT3G-V2-S1-058"
  },
  "servers": [
    {
      "url": "http://0.0.0.0:{port}/api/v1",
      "description": "DataService API",
      "variables": {
        "port": {
          "default": "3000",
          "description": "Service port from $PORT environment variable"
        }
      }
    }
  ],
  "tags": [
    {"name": "Health", "description": "Service health and readiness endpoints"},
    {"name": "Users", "description": "User management operations"},
    {"name": "Providers", "description": "Scholarship provider operations"},
    {"name": "Scholarships", "description": "Scholarship management operations"},
    {"name": "Uploads", "description": "Document upload operations"},
    {"name": "Ledgers", "description": "Credit ledger operations"}
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Liveness probe",
        "description": "Returns service health status for Kubernetes liveness probes",
        "operationId": "getHealth",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/HealthResponse"}
              }
            }
          },
          "503": {
            "description": "Service is unhealthy",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/HealthResponse"}
              }
            }
          }
        }
      }
    },
    "/readyz": {
      "get": {
        "tags": ["Health"],
        "summary": "Readiness probe",
        "description": "Returns service readiness status including dependency checks",
        "operationId": "getReadiness",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is ready",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ReadinessResponse"}
              }
            }
          },
          "503": {
            "description": "Service is not ready",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ReadinessResponse"}
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": ["Users"],
        "summary": "List users",
        "description": "Retrieve a paginated list of users. Requires admin role.",
        "operationId": "listUsers",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [
          {"$ref": "#/components/parameters/limitParam"},
          {"$ref": "#/components/parameters/offsetParam"},
          {"$ref": "#/components/parameters/searchParam"}
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/UserListResponse"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"}
        }
      },
      "post": {
        "tags": ["Users"],
        "summary": "Create user",
        "description": "Create a new user record. Requires admin role.",
        "operationId": "createUser",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateUserRequest"}
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/User"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"}
        }
      }
    },
    "/users/{id}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user by ID",
        "description": "Retrieve a specific user by ID",
        "operationId": "getUser",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/User"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Update user",
        "description": "Update an existing user record",
        "operationId": "updateUser",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/UpdateUserRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/User"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Delete user",
        "description": "Soft-delete a user record",
        "operationId": "deleteUser",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "204": {"description": "User deleted"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      }
    },
    "/providers": {
      "get": {
        "tags": ["Providers"],
        "summary": "List providers",
        "description": "Retrieve a paginated list of scholarship providers",
        "operationId": "listProviders",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [
          {"$ref": "#/components/parameters/limitParam"},
          {"$ref": "#/components/parameters/offsetParam"},
          {
            "name": "is_ferpa_covered",
            "in": "query",
            "description": "Filter by FERPA coverage status",
            "schema": {"type": "boolean"}
          }
        ],
        "responses": {
          "200": {
            "description": "List of providers",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ProviderListResponse"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"}
        }
      },
      "post": {
        "tags": ["Providers"],
        "summary": "Create provider",
        "description": "Register a new scholarship provider",
        "operationId": "createProvider",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateProviderRequest"}
            }
          }
        },
        "responses": {
          "201": {
            "description": "Provider created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Provider"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"}
        }
      }
    },
    "/providers/{id}": {
      "get": {
        "tags": ["Providers"],
        "summary": "Get provider by ID",
        "operationId": "getProvider",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "200": {
            "description": "Provider details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Provider"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "put": {
        "tags": ["Providers"],
        "summary": "Update provider",
        "operationId": "updateProvider",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/UpdateProviderRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Provider updated",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Provider"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "delete": {
        "tags": ["Providers"],
        "summary": "Delete provider",
        "operationId": "deleteProvider",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "204": {"description": "Provider deleted"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      }
    },
    "/scholarships": {
      "get": {
        "tags": ["Scholarships"],
        "summary": "List scholarships",
        "description": "Retrieve a paginated list of scholarships",
        "operationId": "listScholarships",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [
          {"$ref": "#/components/parameters/limitParam"},
          {"$ref": "#/components/parameters/offsetParam"},
          {
            "name": "is_active",
            "in": "query",
            "description": "Filter by active status",
            "schema": {"type": "boolean", "default": true}
          },
          {
            "name": "provider_id",
            "in": "query",
            "description": "Filter by provider",
            "schema": {"type": "string", "format": "uuid"}
          }
        ],
        "responses": {
          "200": {
            "description": "List of scholarships",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ScholarshipListResponse"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"}
        }
      },
      "post": {
        "tags": ["Scholarships"],
        "summary": "Create scholarship",
        "description": "Create a new scholarship opportunity",
        "operationId": "createScholarship",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateScholarshipRequest"}
            }
          }
        },
        "responses": {
          "201": {
            "description": "Scholarship created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Scholarship"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"}
        }
      }
    },
    "/scholarships/{id}": {
      "get": {
        "tags": ["Scholarships"],
        "summary": "Get scholarship by ID",
        "operationId": "getScholarship",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "200": {
            "description": "Scholarship details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Scholarship"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "put": {
        "tags": ["Scholarships"],
        "summary": "Update scholarship",
        "operationId": "updateScholarship",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/UpdateScholarshipRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scholarship updated",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Scholarship"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "delete": {
        "tags": ["Scholarships"],
        "summary": "Delete scholarship",
        "description": "Deactivate a scholarship (soft delete)",
        "operationId": "deleteScholarship",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "204": {"description": "Scholarship deleted"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      }
    },
    "/uploads": {
      "get": {
        "tags": ["Uploads"],
        "summary": "List uploads",
        "description": "Retrieve a paginated list of document uploads",
        "operationId": "listUploads",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [
          {"$ref": "#/components/parameters/limitParam"},
          {"$ref": "#/components/parameters/offsetParam"},
          {
            "name": "student_id",
            "in": "query",
            "description": "Filter by student (requires FERPA authorization for non-self)",
            "schema": {"type": "string", "format": "uuid"}
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by document type",
            "schema": {"type": "string", "enum": ["transcript", "resume", "essay", "letter_of_recommendation", "other"]}
          }
        ],
        "responses": {
          "200": {
            "description": "List of uploads",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/UploadListResponse"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/FerpaViolation"}
        }
      },
      "post": {
        "tags": ["Uploads"],
        "summary": "Upload document",
        "description": "Upload a new document",
        "operationId": "createUpload",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {"$ref": "#/components/schemas/CreateUploadRequest"}
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Upload"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"}
        }
      }
    },
    "/uploads/{id}": {
      "get": {
        "tags": ["Uploads"],
        "summary": "Get upload by ID",
        "operationId": "getUpload",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "200": {
            "description": "Upload details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Upload"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/FerpaViolation"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "put": {
        "tags": ["Uploads"],
        "summary": "Update upload metadata",
        "operationId": "updateUpload",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/UpdateUploadRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload updated",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Upload"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      },
      "delete": {
        "tags": ["Uploads"],
        "summary": "Delete upload",
        "operationId": "deleteUpload",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "204": {"description": "Upload deleted"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      }
    },
    "/ledgers": {
      "get": {
        "tags": ["Ledgers"],
        "summary": "List ledger entries",
        "description": "Retrieve credit transaction history. Users can only view their own ledger unless admin.",
        "operationId": "listLedgerEntries",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [
          {"$ref": "#/components/parameters/limitParam"},
          {"$ref": "#/components/parameters/offsetParam"},
          {
            "name": "user_id",
            "in": "query",
            "description": "Filter by user (admin only)",
            "schema": {"type": "string", "format": "uuid"}
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by transaction type",
            "schema": {"type": "string", "enum": ["purchase", "deduction", "refund", "adjustment"]}
          }
        ],
        "responses": {
          "200": {
            "description": "List of ledger entries",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/LedgerListResponse"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"}
        }
      },
      "post": {
        "tags": ["Ledgers"],
        "summary": "Create ledger entry",
        "description": "Create a new credit ledger entry. System/admin use only.",
        "operationId": "createLedgerEntry",
        "security": [{"apiKey": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateLedgerEntryRequest"}
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ledger entry created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/LedgerEntry"}
              }
            }
          },
          "400": {"$ref": "#/components/responses/ValidationError"},
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"}
        }
      }
    },
    "/ledgers/{id}": {
      "get": {
        "tags": ["Ledgers"],
        "summary": "Get ledger entry by ID",
        "operationId": "getLedgerEntry",
        "security": [{"bearerAuth": []}, {"apiKey": []}],
        "parameters": [{"$ref": "#/components/parameters/idParam"}],
        "responses": {
          "200": {
            "description": "Ledger entry details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/LedgerEntry"}
              }
            }
          },
          "401": {"$ref": "#/components/responses/Unauthorized"},
          "403": {"$ref": "#/components/responses/Forbidden"},
          "404": {"$ref": "#/components/responses/NotFound"}
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token from scholar-auth (A1)"
      },
      "apiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key",
        "description": "API key for service-to-service communication"
      }
    },
    "parameters": {
      "idParam": {
        "name": "id",
        "in": "path",
        "required": true,
        "description": "Resource UUID",
        "schema": {"type": "string", "format": "uuid"}
      },
      "limitParam": {
        "name": "limit",
        "in": "query",
        "description": "Maximum number of items to return",
        "schema": {"type": "integer", "minimum": 1, "maximum": 100, "default": 20}
      },
      "offsetParam": {
        "name": "offset",
        "in": "query",
        "description": "Number of items to skip",
        "schema": {"type": "integer", "minimum": 0, "default": 0}
      },
      "searchParam": {
        "name": "search",
        "in": "query",
        "description": "Search query string",
        "schema": {"type": "string", "maxLength": 100}
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Authentication required",
        "content": {
          "application/json": {
            "schema": {"$ref": "#/components/schemas/ErrorResponse"}
          }
        }
      },
      "Forbidden": {
        "description": "Insufficient permissions",
        "content": {
          "application/json": {
            "schema": {"$ref": "#/components/schemas/ErrorResponse"}
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {"$ref": "#/components/schemas/ErrorResponse"}
          }
        }
      },
      "ValidationError": {
        "description": "Invalid request payload",
        "content": {
          "application/json": {
            "schema": {"$ref": "#/components/schemas/ErrorResponse"}
          }
        }
      },
      "FerpaViolation": {
        "description": "FERPA access denied",
        "content": {
          "application/json": {
            "schema": {"$ref": "#/components/schemas/ErrorResponse"}
          }
        }
      }
    },
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "required": ["status", "timestamp"],
        "properties": {
          "status": {"type": "string", "enum": ["healthy", "unhealthy"]},
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "ReadinessResponse": {
        "type": "object",
        "required": ["status", "checks", "timestamp"],
        "properties": {
          "status": {"type": "string", "enum": ["ready", "not_ready"]},
          "checks": {
            "type": "object",
            "properties": {
              "database": {"type": "string", "enum": ["ok", "error"]},
              "cache": {"type": "string", "enum": ["ok", "error"]},
              "auth": {"type": "string", "enum": ["ok", "error"]}
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "ServiceMarkers": {
        "type": "object",
        "properties": {
          "service": {"type": "string", "example": "scholar-dataservice"},
          "version": {"type": "string", "example": "1.0.0"},
          "environment": {"type": "string", "enum": ["production", "staging", "development"]},
          "region": {"type": "string", "example": "us-west-2"},
          "instance_id": {"type": "string", "format": "uuid"},
          "build_sha": {"type": "string"},
          "deploy_timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": ["error"],
        "properties": {
          "error": {
            "type": "object",
            "required": ["code", "message", "request_id"],
            "properties": {
              "code": {"type": "string"},
              "message": {"type": "string"},
              "request_id": {"type": "string", "format": "uuid"},
              "details": {"type": "object"}
            }
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "total": {"type": "integer"},
          "limit": {"type": "integer"},
          "offset": {"type": "integer"},
          "has_more": {"type": "boolean"}
        }
      },
      "User": {
        "type": "object",
        "required": ["id", "createdAt", "updatedAt"],
        "properties": {
          "id": {"type": "string", "format": "uuid"},
          "email": {"type": "string", "format": "email", "x-ferpa": true},
          "firstName": {"type": "string", "x-ferpa": true},
          "lastName": {"type": "string", "x-ferpa": true},
          "profileImageUrl": {"type": "string", "format": "uri"},
          "birthdate": {"type": "string", "format": "date", "x-ferpa": true},
          "ageVerified": {"type": "boolean"},
          "subscriptionStatus": {"type": "string", "enum": ["inactive", "active", "trialing", "canceled", "past_due"]},
          "createdAt": {"type": "string", "format": "date-time"},
          "updatedAt": {"type": "string", "format": "date-time"}
        }
      },
      "CreateUserRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {"type": "string", "format": "email"},
          "firstName": {"type": "string", "maxLength": 100},
          "lastName": {"type": "string", "maxLength": 100},
          "birthdate": {"type": "string", "format": "date"}
        }
      },
      "UpdateUserRequest": {
        "type": "object",
        "properties": {
          "firstName": {"type": "string", "maxLength": 100},
          "lastName": {"type": "string", "maxLength": 100},
          "profileImageUrl": {"type": "string", "format": "uri"}
        }
      },
      "UserListResponse": {
        "type": "object",
        "properties": {
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/User"}},
          "meta": {"$ref": "#/components/schemas/PaginationMeta"}
        }
      },
      "Provider": {
        "type": "object",
        "required": ["id", "name", "type", "createdAt"],
        "properties": {
          "id": {"type": "string", "format": "uuid"},
          "name": {"type": "string"},
          "type": {"type": "string", "enum": ["school", "foundation", "corporate", "government"]},
          "ein": {"type": "string", "description": "Encrypted tax ID"},
          "contactEmail": {"type": "string", "format": "email"},
          "isVerified": {"type": "boolean"},
          "is_ferpa_covered": {"type": "boolean", "description": "FERPA coverage flag"},
          "createdAt": {"type": "string", "format": "date-time"},
          "updatedAt": {"type": "string", "format": "date-time"}
        }
      },
      "CreateProviderRequest": {
        "type": "object",
        "required": ["name", "type", "contactEmail"],
        "properties": {
          "name": {"type": "string", "maxLength": 200},
          "type": {"type": "string", "enum": ["school", "foundation", "corporate", "government"]},
          "ein": {"type": "string"},
          "contactEmail": {"type": "string", "format": "email"},
          "is_ferpa_covered": {"type": "boolean", "default": false}
        }
      },
      "UpdateProviderRequest": {
        "type": "object",
        "properties": {
          "name": {"type": "string", "maxLength": 200},
          "contactEmail": {"type": "string", "format": "email"},
          "is_ferpa_covered": {"type": "boolean"}
        }
      },
      "ProviderListResponse": {
        "type": "object",
        "properties": {
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/Provider"}},
          "meta": {"$ref": "#/components/schemas/PaginationMeta"}
        }
      },
      "Scholarship": {
        "type": "object",
        "required": ["id", "title", "organization", "amount", "deadline"],
        "properties": {
          "id": {"type": "string", "format": "uuid"},
          "title": {"type": "string"},
          "organization": {"type": "string"},
          "amount": {"type": "integer", "description": "Award amount in cents"},
          "description": {"type": "string"},
          "requirements": {"type": "array", "items": {"type": "string"}},
          "eligibilityCriteria": {"type": "object"},
          "deadline": {"type": "string", "format": "date-time"},
          "applicationUrl": {"type": "string", "format": "uri"},
          "isActive": {"type": "boolean"},
          "providerId": {"type": "string", "format": "uuid"},
          "createdAt": {"type": "string", "format": "date-time"},
          "updatedAt": {"type": "string", "format": "date-time"}
        }
      },
      "CreateScholarshipRequest": {
        "type": "object",
        "required": ["title", "organization", "amount", "deadline"],
        "properties": {
          "title": {"type": "string", "maxLength": 200},
          "organization": {"type": "string", "maxLength": 200},
          "amount": {"type": "integer", "minimum": 1, "maximum": 100000000},
          "description": {"type": "string"},
          "requirements": {"type": "array", "items": {"type": "string"}},
          "eligibilityCriteria": {"type": "object"},
          "deadline": {"type": "string", "format": "date-time"},
          "applicationUrl": {"type": "string", "format": "uri"}
        }
      },
      "UpdateScholarshipRequest": {
        "type": "object",
        "properties": {
          "title": {"type": "string", "maxLength": 200},
          "amount": {"type": "integer", "minimum": 1},
          "description": {"type": "string"},
          "requirements": {"type": "array", "items": {"type": "string"}},
          "deadline": {"type": "string", "format": "date-time"},
          "isActive": {"type": "boolean"}
        }
      },
      "ScholarshipListResponse": {
        "type": "object",
        "properties": {
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/Scholarship"}},
          "meta": {"$ref": "#/components/schemas/PaginationMeta"}
        }
      },
      "Upload": {
        "type": "object",
        "required": ["id", "studentId", "type", "title", "fileName"],
        "properties": {
          "id": {"type": "string", "format": "uuid"},
          "studentId": {"type": "string", "format": "uuid", "x-ferpa": true},
          "type": {"type": "string", "enum": ["transcript", "resume", "essay", "letter_of_recommendation", "other"], "x-ferpa": true},
          "title": {"type": "string"},
          "fileName": {"type": "string"},
          "filePath": {"type": "string"},
          "fileSize": {"type": "integer"},
          "mimeType": {"type": "string"},
          "category": {"type": "string"},
          "uploadedAt": {"type": "string", "format": "date-time"}
        }
      },
      "CreateUploadRequest": {
        "type": "object",
        "required": ["file", "type", "title"],
        "properties": {
          "file": {"type": "string", "format": "binary"},
          "type": {"type": "string", "enum": ["transcript", "resume", "essay", "letter_of_recommendation", "other"]},
          "title": {"type": "string", "maxLength": 200},
          "category": {"type": "string"}
        }
      },
      "UpdateUploadRequest": {
        "type": "object",
        "properties": {
          "title": {"type": "string", "maxLength": 200},
          "category": {"type": "string"}
        }
      },
      "UploadListResponse": {
        "type": "object",
        "properties": {
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/Upload"}},
          "meta": {"$ref": "#/components/schemas/PaginationMeta"}
        }
      },
      "LedgerEntry": {
        "type": "object",
        "required": ["id", "userId", "type", "amountMillicredits", "balanceAfterMillicredits", "referenceType", "createdAt"],
        "properties": {
          "id": {"type": "string", "format": "uuid"},
          "userId": {"type": "string", "format": "uuid"},
          "type": {"type": "string", "enum": ["purchase", "deduction", "refund", "adjustment"]},
          "amountMillicredits": {"type": "integer", "format": "int64"},
          "balanceAfterMillicredits": {"type": "integer", "format": "int64"},
          "referenceType": {"type": "string", "enum": ["stripe", "openai", "admin", "system"]},
          "referenceId": {"type": "string"},
          "metadata": {"type": "object"},
          "createdAt": {"type": "string", "format": "date-time"}
        }
      },
      "CreateLedgerEntryRequest": {
        "type": "object",
        "required": ["userId", "type", "amountMillicredits", "referenceType"],
        "properties": {
          "userId": {"type": "string", "format": "uuid"},
          "type": {"type": "string", "enum": ["purchase", "deduction", "refund", "adjustment"]},
          "amountMillicredits": {"type": "integer", "format": "int64"},
          "referenceType": {"type": "string", "enum": ["stripe", "openai", "admin", "system"]},
          "referenceId": {"type": "string"},
          "metadata": {"type": "object"}
        }
      },
      "LedgerListResponse": {
        "type": "object",
        "properties": {
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/LedgerEntry"}},
          "meta": {"$ref": "#/components/schemas/PaginationMeta"}
        }
      }
    }
  },
  "x-service-markers": {
    "service": "scholar-dataservice",
    "version": "1.0.0",
    "run_id": "CEOSPRINT-20260121-EXEC-ZT3G-V2-S1-058"
  }
}
