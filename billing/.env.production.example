# Production Environment Configuration for ScholarLink Billing Service

# Server Configuration
NODE_ENV=production
PORT=3000
LOG_LEVEL=info
TRUST_PROXY=true

# CORS Configuration (exact origins, no wildcards)
CORS_ALLOWED_ORIGINS=https://student-pilot.replit.app,https://admin.student-pilot.replit.app

# Billing Configuration
BILLING_ROUNDING_MODE=precise
RATE_CARD_VERSION=v1
REQUESTS_PER_MINUTE=100

# Database Configuration (TLS enabled, least-privileged user)
DATABASE_URL=postgresql://billing_user:SECURE_PASSWORD@prod-postgres.cluster.amazonaws.com:5432/billing?sslmode=require&connection_limit=10

# Prisma Pool Configuration
PRISMA_POOL_MIN=2
PRISMA_POOL_MAX=10

# JWT Authentication (RS256 verification)
JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----
# Alternative: JWT_JWKS_URI=https://auth.student-pilot.replit.app/.well-known/jwks.json
JWT_ISSUER=https://student-pilot.replit.app
JWT_AUDIENCE=https://billing.student-pilot.replit.app

# Stripe Configuration (live keys)
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Webhook Monitoring
WEBHOOK_SHARED_SECRET=your_monitoring_webhook_hmac_secret_here

# Health Check Configuration
READINESS_STARTUP_GRACE_SECONDS=30