{
  "app_name": "student_pilot",
  "app_base_url": "https://student-pilot-jamarrlmayes.replit.app",
  "application_type": "User-Facing",
  "version": "2.0.0",
  "last_updated": "2025-11-04T15:36:00Z",
  
  "database": {
    "provider": "Neon PostgreSQL",
    "connection_pattern": "postgresql://[user]:[password]@[host]/[dbname]?sslmode=require",
    "region": "Auto-managed by Neon",
    "tls_mode": "require",
    "backup_strategy": {
      "type": "Neon-managed continuous backup",
      "rpo": "< 1 minute",
      "rto": "< 5 minutes",
      "retention": "7 days point-in-time recovery"
    },
    "production_ready": true,
    "notes": "Serverless PostgreSQL with built-in high availability, automatic scaling, and continuous backup"
  },
  
  "email_sms": {
    "transactional_email": {
      "provider": "Stripe",
      "type": "Native transactional receipts",
      "configuration": "Stripe Checkout automated receipts",
      "production_ready": true
    },
    "marketing_email": {
      "status": "DISABLED",
      "posture": "observe-only",
      "reason": "Gated pending auto_com_center DRY-RUN PASS",
      "future_provider": "TBD via auto_com_center",
      "production_ready": false
    },
    "sms": {
      "status": "NOT_CONFIGURED",
      "reason": "Not required for Phase 1-3 monetization",
      "production_ready": "N/A"
    }
  },
  
  "observability": {
    "logging": {
      "method": "Server-side console logging",
      "correlation": "X-Request-ID header on all responses",
      "retention": "7 years (compliance requirement)",
      "pii_handling": "Redacted per FERPA/COPPA",
      "production_ready": true
    },
    "monitoring": {
      "health_endpoint": "https://student-pilot-jamarrlmayes.replit.app/health",
      "canary_endpoint": "https://student-pilot-jamarrlmayes.replit.app/canary",
      "metrics_endpoint": "https://student-pilot-jamarrlmayes.replit.app/metrics",
      "uptime_tracking": "Process uptime via /health",
      "production_ready": true
    },
    "sentry_integration": {
      "provider": "Sentry",
      "version": "10.22.0",
      "service_name": "student_pilot",
      "environment": "development",
      "dsn_configured": true,
      "features": {
        "error_tracking": "enabled (automatic via setupExpressErrorHandler)",
        "performance_monitoring": "enabled (10% sampling, automatic via OpenTelemetry)",
        "profiling": "enabled (10% sampling)",
        "pii_redaction": "enforced (cookies, auth headers, emails, IPs)"
      },
      "sampling_rates": {
        "traces": "0.1 (10%)",
        "profiles": "0.1 (10%)"
      },
      "integrations": [
        "nodeProfilingIntegration",
        "Sentry.setupExpressErrorHandler (v10 API)",
        "OpenTelemetry automatic tracing",
        "captureException on unhandledRejection",
        "captureException on uncaughtException"
      ],
      "middleware": {
        "error_handler": "Sentry.setupExpressErrorHandler(app)",
        "placement": "After routes, before custom error middleware",
        "api_version": "v10 (Handlers deprecated)"
      },
      "production_ready": true,
      "ceo_directive_compliance": "REQUIRED NOW - Freeze exception granted",
      "activation_date": "2025-11-04T22:26:00Z",
      "fix_date": "2025-11-04T23:10:00Z"
    },
    "apm_integration": {
      "provider": "Sentry",
      "status": "Active (error + performance monitoring)",
      "p95_tracking": "Sentry performance monitoring + server logs",
      "alert_thresholds": {
        "p95_latency": "120ms",
        "error_rate": "0.1%",
        "uptime": "99.9%"
      },
      "production_ready": true
    },
    "dashboards": {
      "sentry": "Error and performance dashboards active",
      "internal": "Server logs + Sentry analytics",
      "live_p95": "Sentry performance monitoring",
      "status": "production_operational"
    }
  },
  
  "cloud_storage": {
    "provider": "Google Cloud Storage",
    "integration_method": "Replit sidecar proxy",
    "bucket_pattern": "repl-default-bucket-$REPL_ID",
    "region": "Auto-managed",
    "encryption": {
      "at_rest": "Google-managed encryption keys",
      "in_transit": "TLS 1.3"
    },
    "access_control": {
      "method": "Presigned URLs",
      "ttl": "1 hour (configurable)",
      "permissions": "Scoped per object (public/private)"
    },
    "lifecycle_policy": "Not configured (manual management)",
    "production_ready": true,
    "notes": "Used for student document uploads (resumes, transcripts, etc.)"
  },
  
  "payments": {
    "provider": "Stripe",
    "api_version": "2025-07-30.basil",
    "mode": {
      "current": "dual (test + live)",
      "test_instance": "Always initialized",
      "live_instance": "Initialized if STRIPE_SECRET_KEY present",
      "rollout_percentage": "0% (BILLING_ROLLOUT_PERCENTAGE env var)",
      "phase1_ready": true
    },
    "rollout_mechanism": {
      "type": "Hash-based deterministic assignment",
      "function": "shouldUseLiveStripe(userId)",
      "stability": "Same user always gets same mode",
      "implementation": "server/environment.ts + server/routes.ts",
      "logging": "[BILLING] User {userId} assigned to Stripe {mode} mode",
      "environment_aware": "Always test in development",
      "graceful_degradation": "Falls back to test if LIVE keys missing"
    },
    "integration": {
      "checkout": "Stripe Checkout (hosted)",
      "dual_instances": "stripeTest (always) + stripeLive (conditional)",
      "user_assignment": "getStripeForUser(userId) returns appropriate instance",
      "webhooks": {
        "endpoint": "https://student-pilot-jamarrlmayes.replit.app/api/stripe/webhook",
        "events": ["checkout.session.completed", "payment_intent.succeeded"],
        "security": "Stripe signature verification",
        "ip_allowlist": "Not configured (webhook secret provides security)"
      },
      "idempotency": "Stripe-native enforcement via idempotency keys"
    },
    "production_ready": true,
    "phased_rollout_plan": {
      "mechanism": "BILLING_ROLLOUT_PERCENTAGE (0-100)",
      "phase1": "Set to 10 for 10% live traffic",
      "phase2": "Set to 50 for 50% traffic (pending DRY-RUN PASS + 24h stability)",
      "phase3": "Set to 100 for 100% traffic (pending DRY-RUN PASS + 48h stability)",
      "activation_trigger": "CEO Monetization Gate approval post-Gate B"
    }
  },
  
  "security_compliance": {
    "security_headers": {
      "strict_transport_security": "max-age=31536000; includeSubDomains; preload",
      "content_security_policy": "default-src 'self'; frame-ancestors 'none' (+ Stripe extensions)",
      "x_frame_options": "DENY",
      "x_content_type_options": "nosniff",
      "referrer_policy": "strict-origin-when-cross-origin",
      "permissions_policy": "camera=(), microphone=(), geolocation=(), payment=()",
      "status": "6/6 headers verified",
      "agent3_v27_compliant": true
    },
    "tls": {
      "version": "TLS 1.2+",
      "https_only": true,
      "http_redirect": "Enforced by Replit platform"
    },
    "authentication": {
      "provider": "scholar_auth (centralized OIDC)",
      "method": "PKCE S256 with refresh token rotation",
      "session_storage": "PostgreSQL-backed express-session",
      "no_shadow_identity": true
    },
    "authorization": {
      "rbac": "Role-based (Student, Provider, Admin)",
      "enforcement": "Route-level middleware",
      "error_format": "Standardized JSON with request_id",
      "status_codes": "401 (unauthenticated), 403 (unauthorized)"
    },
    "rate_limiting": {
      "endpoints": "Auth and write paths",
      "limits": "300 rpm browsing, 60 rpm checkout",
      "error_response": "429 with standardized JSON + request_id"
    },
    "data_protection": {
      "ferpa_coppa_compliant": true,
      "pii_redaction": "Enforced in logs",
      "data_minimization": true,
      "retention_policy": "7 years for audit trails",
      "encryption_at_rest": "Database and storage encrypted"
    }
  },
  
  "integration_verification": {
    "scholar_auth": {
      "status": "verified",
      "auth_success_rate": "100% (30/30 samples)",
      "jwks_validation": "operational",
      "session_management": "PostgreSQL-backed"
    },
    "scholarship_api": {
      "status": "verified",
      "data_integrity": "SSOT enforced",
      "rbac": "operational",
      "error_format": "standardized with request_id"
    },
    "scholarship_sage": {
      "status": "verified",
      "recommendations": "operational with matchReasons",
      "empty_profile_handling": "graceful (returns empty array)",
      "explainability": "required and verified"
    },
    "auto_page_maker": {
      "status": "verified",
      "seo_engine": "2,101 pages active",
      "attribution_path": "auto_page_maker → student_pilot",
      "conversion_tracking": "enabled"
    }
  },
  
  "slo_compliance": {
    "current_performance": {
      "uptime": "99.9%+",
      "p95_latency": "1-3ms",
      "error_rate": "0%",
      "auth_success": "100%"
    },
    "targets": {
      "uptime": "≥99.9%",
      "p95_latency": "≤120ms",
      "error_rate": "≤0.1%",
      "auth_success": "≥99.5%"
    },
    "status": "All targets exceeded"
  },
  
  "operational_readiness": {
    "health_endpoint": "/health (200 OK when healthy)",
    "ready_endpoint": "/ready (PostgreSQL check)",
    "metrics_endpoint": "/metrics (SLO metrics)",
    "prometheus_endpoint": "/metrics/prometheus",
    "canary_endpoint": "/canary (AGENT3 v2.7 compliance)",
    "standardized_errors": "All endpoints return {error: {code, message, request_id}}",
    "request_id_correlation": "X-Request-ID header on all responses"
  },
  
  "freeze_discipline": {
    "schema_changes": "FROZEN (no changes until FOC)",
    "api_changes": "FROZEN (no changes until FOC)",
    "configuration_only": true,
    "last_code_change": "2025-11-03 (recommendation engine empty-state fix, CEO approved)"
  },
  
  "monetization_readiness": {
    "phase1_10_percent": {
      "ready": true,
      "trigger": "provider_register = GO + 5 minutes",
      "guardrails": {
        "payment_success": "≥98.5%",
        "error_rate": "<0.2%",
        "auth_success": "≥99.5%",
        "cvr_deviation": "±10% baseline"
      },
      "auto_rollback": "Armed (<60s execution)",
      "marketing_posture": "observe-only (no fan-out)"
    },
    "phase2_50_percent": {
      "locked": true,
      "requirements": [
        "auto_com_center DRY-RUN PASS",
        "24h Phase 1 stability"
      ]
    },
    "phase3_100_percent": {
      "locked": true,
      "requirements": [
        "auto_com_center DRY-RUN PASS",
        "48h cumulative stability"
      ]
    }
  },
  
  "lifecycle_planning": {
    "category": "User-Facing",
    "estimated_cessation": "Q3 2028 (36-42 months)",
    "rationale": [
      "UX evolution and Gen Z market demands",
      "Framework/stack refresh (React/Vite/TypeScript)",
      "WCAG 3.0 adoption (2027-2028)",
      "Competitive pressure in B2C education tech"
    ],
    "acceleration_factors": [
      "Framework EOL or critical CVEs",
      "Conversion plateau <3% for 2+ quarters",
      "WCAG 3.0 compliance mandate",
      "Competitor 2x+ conversion advantage",
      "CWV threshold tightening"
    ],
    "extension_factors": [
      "Sustained conversion growth",
      "Framework long-term compatibility",
      "Stable user behavior patterns",
      "Conversion >5% sustained"
    ],
    "monitoring_signals": [
      "Quarterly conversion rate trends",
      "Monthly CWV/Lighthouse scores",
      "Framework security advisories",
      "Competitive UX benchmarks",
      "User feedback and friction points"
    ]
  },
  
  "evidence_artifacts": {
    "section_7_report": "e2e/reports/student_pilot/student_pilot_Section_7_FOC_Report_Final.md",
    "sha256_manifest": "e2e/reports/student_pilot/student_pilot_Section_7_manifest.json",
    "readiness_reports": "e2e/reports/student_pilot/*readiness_report*.md",
    "fix_plans": "e2e/reports/student_pilot/*fix_plan*.yaml",
    "e2e_test_results": "e2e/*.spec.ts execution logs"
  },
  
  "production_readiness_assessment": {
    "database": "✅ Production-grade (Neon PostgreSQL)",
    "email": "✅ Transactional ready (Stripe); ⏳ Marketing gated (DRY-RUN)",
    "observability": "⚠️ Basic operational (enhancement recommended)",
    "storage": "✅ Production-ready (GCS via Replit)",
    "payments": "✅ Stripe live keys ready",
    "security": "✅ 6/6 headers, HTTPS-only, RBAC enforced",
    "compliance": "✅ FERPA/COPPA aligned",
    "integrations": "✅ All verified and operational",
    "slos": "✅ All targets exceeded",
    "overall_status": "READY for Phase 1 launch (10% traffic)"
  }
}
